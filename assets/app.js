(()=>{"use strict";var e,a={208:()=>{},194:(e,a,t)=>{var r=t(294),l=t(745),o=t(998),s=t(262);const n="/assets",m=88,u=88,c='a, button, input:not([type="checkbox"]):not([type="file"]), select, textarea, svg, [tabindex], [contentEditable]';function d(e){return e.toString().padStart(2,"0")}function i(e){const{minutes:a,seconds:t}=e;return`${d(a)} : ${d(t)}`}function p(e,a){const t=new Date;return`${e}${t.getFullYear()}${d(t.getMonth()+1)}${d(t.getDate())}${d(t.getHours())}${d(t.getMinutes())}${d(t.getSeconds())}.${a}`}function X(){return JSON.parse(window.sessionStorage.getItem("xsound.app-config")||"{}")}const b=e=>r.createElement("div",{className:"Flexbox"},e.children);var h=t(935);const E=e=>{const{className:a,onClose:t}=e,l=(0,r.useCallback)((e=>{t&&("Enter"!==e.nativeEvent.key&&13!==e.nativeEvent.keyCode||t(e))}),[t]);return t?r.createElement("div",{role:"button",tabIndex:0,className:a,onClick:t,onKeyDown:l}):r.createElement("div",{role:"presentation",className:a})},v=e=>{const{isShow:a,hasOverlay:t,title:l,asAlert:o,children:s,onClose:n}=e,m=(0,r.useId)(),u=(0,r.useMemo)((()=>`label-${m}`),[m]),d=(0,r.useMemo)((()=>`describe-${m}`),[m]);return(0,r.useEffect)((()=>{const e=document.getElementById("app");if(null===e)return;const t=e=>Array.from(document.querySelectorAll('[aria-hidden="true"]')).some((a=>a.contains(e)));a?Array.from(e.querySelectorAll(c)).filter((e=>!t(e)&&"-1"!==e.getAttribute("tabindex"))).forEach((e=>{e.setAttribute("tabindex","-1")})):Array.from(e.querySelectorAll(c)).filter((e=>!t(e)&&"-1"===e.getAttribute("tabindex"))).forEach((e=>{"switch"===e.getAttribute("role")?e.setAttribute("tabindex","0"):"checkbox"===e.getAttribute("type")||"file"===e.getAttribute("type")?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")}))}),[a]),r.createElement("div",{role:"dialog",tabIndex:-1,"aria-modal":a,"aria-labelledby":u,"aria-describedby":d,className:"Modal"+(a?" -show":" -hidden")},t?r.createElement(E,{className:"Modal__overlay",onClose:n}):null,r.createElement("div",{className:"Modal__inner"},n?r.createElement("button",{type:"button","aria-label":"Close modal",className:"Modal__closer",onClick:n},"X"):null,r.createElement("h2",{id:u,className:"Modal__title"},l),r.createElement("div",{role:o?"alert":void 0,id:d,className:"Modal__contents"},s)))},g=e=>{const{children:a,...t}=e;return(0,h.createPortal)(r.createElement(v,{...t},a),document.body)},f=({numberOfDivisions:e,children:a})=>r.createElement("div",{style:{width:`calc(100% / ${e>0?e:1})`}},a),C=e=>{const{space:a,direction:t}=e;switch(t){case"top":return r.createElement("div",{role:"presentation",style:{marginTop:`${a}px`}});case"left":case"right":return r.createElement("div",{role:"presentation",style:{width:`${a}px`}});default:return r.createElement("div",{role:"presentation",style:{marginBottom:`${a}px`}})}},k=e=>{const{label:a,checked:t,labelAsText:l,controls:o,tabIndex:s=0,onChange:n}=e,m=(0,r.useRef)(null),u=(0,r.useId)(),c=(0,r.useCallback)((e=>{const a=e.nativeEvent;if("Space"===a.code||13===a.keyCode){e.preventDefault();const a=m.current;if(null===a)return;a.click()}}),[]);return r.createElement("div",{role:"switch","aria-checked":t,tabIndex:s,className:`Switch${t?" -checked":""}${l?" -text":""}`,onKeyDown:c},o?r.createElement("input",{type:"checkbox",ref:m,id:u,checked:t,"aria-controls":o,tabIndex:-1,onChange:n}):r.createElement("input",{type:"checkbox",ref:m,id:u,checked:t,tabIndex:-1,onChange:n}),r.createElement("label",{htmlFor:u},a,r.createElement("span",{role:"presentation"})))},y=e=>{const{label:a,value:t,min:l,max:o,step:s,tabIndex:n,onChange:m}=e,u=(t-l)/(o-l),c=100*u;return r.createElement("div",{className:"Slider"},r.createElement("span",{className:"Slider__value",style:{width:`calc(${c}% - (${u} * 28px))`}}),r.createElement("input",{type:"range","aria-label":a,value:t,min:l,max:o,step:s,tabIndex:n,onChange:m}))},A=e=>{const{value:a,min:t,max:l,step:o,id:s,tabIndex:n,onChange:m}=e;return r.createElement("input",{type:"number",className:"Spinner",id:s,value:a,min:t,max:l,step:o,tabIndex:n,onChange:m})},R=e=>{const{label:a,autoupdate:t,min:l,max:o,step:s,defaultValue:n,width:m,tabIndex:u,onChange:c}=e,[d,i]=(0,r.useState)(n),p=(0,r.useCallback)((e=>{c(e),i(e.currentTarget.valueAsNumber)}),[c]),X=(0,r.useId)();return(0,r.useEffect)((()=>{t&&i(n)}),[t,n]),r.createElement("dl",{className:"ParameterController",style:m?{width:m}:{width:"auto"}},r.createElement("dt",null,r.createElement("label",{htmlFor:X},a),r.createElement(A,{id:X,value:d,min:l,max:o,step:s,tabIndex:u,onChange:p})),r.createElement("dd",null,r.createElement(y,{label:a,value:d,min:l,max:o,step:s,tabIndex:u,onChange:p})))},x=e=>{const{width:a,height:t,hasHoverStyle:l,setElementCallback:o}=e,s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{null!==s.current&&o(s.current)}),[s,o]),r.createElement("canvas",{className:"Canvas"+(l?" -hover":""),ref:s,width:a,height:t})},T=e=>{const{width:a,height:t,hasHoverStyle:l,setElementCallback:o}=e,s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{null!==s.current&&o(s.current)}),[s,o]),r.createElement("svg",{className:"SVG"+(l?" -hover":""),ref:s,width:a,height:t})},N=e=>{const{loadedApp:a,active:t,type:l}=e,[o,n]=(0,r.useState)("00 : 00 - 00 : 00"),[m,u]=(0,r.useState)(!1),[c,d]=(0,r.useState)("left"),p=(0,r.useMemo)((()=>({currentTime:{color:"rgba(255, 255, 255, 0.1)"},styles:{shape:"rect",grid:"rgba(255, 255, 255, 0.2)",gradients:[{offset:0,color:"rgba(0, 128, 255, 1.0)"},{offset:1,color:"rgba(0,   0, 255, 1.0)"}],font:{family:"Arial",size:"12px",style:"normal",weight:"normal"},width:.5,right:15}})),[]),X=(0,r.useCallback)((()=>{d("right"===c?"left":"right")}),[c]),b=(0,r.useCallback)(((e,a,t,r,l)=>{if("mousedown"===e.type||"touchstart"===e.type)return void u(!0);const o=l?t:a;if("mousemove"===e.type||"touchmove"===e.type){const e=s.X.convertTime(a),r=s.X.convertTime(t);return n(`${i(e)} - ${i(r)}`),void(o>=0&&o<=(0,s.X)("audio").param("duration")&&(0,s.X)("audio").param({currentTime:o}))}if("mouseup"===e.type||"touchend"===e.type){switch(r){case"update":o>=0&&o<=(0,s.X)("audio").param("duration")&&((0,s.X)("audio").module("analyser").domain("timeoverview",0).update(o),(0,s.X)("audio").module("analyser").domain("timeoverview",1).update(o),(0,s.X)("audio").param({currentTime:o}));break;case"sprite":(0,s.X)("audio").stop().start(a,t)}u(!1)}}),[]),h=(0,r.useCallback)((e=>{a&&(0,s.X)("audio").module("analyser").domain("timeoverview",0).setup(e).param(p).drag(b).activate()}),[a,p,b]),E=(0,r.useCallback)((e=>{a&&(0,s.X)("audio").module("analyser").domain("timeoverview",1).setup(e).param(p).drag(b).activate()}),[a,p,b]);return r.createElement("dl",{className:"TimeOverviewer"},r.createElement("dt",null,r.createElement("label",null,r.createElement("button",{type:"button",className:`TimeOverviewer__channelSelector -${c}`,"aria-label":"Select Channel",tabIndex:t?0:-1,onClick:X}),"Time Overview [",c,"]"),m?r.createElement("span",{className:"Analyser__dragTime"},o):null),r.createElement("dd",{hidden:"right"===c},"bitmap"===l&&r.createElement(x,{width:1200,height:120,hasHoverStyle:!0,setElementCallback:E}),"vector"===l&&r.createElement(T,{width:1200,height:120,hasHoverStyle:!0,setElementCallback:E})),r.createElement("dd",{hidden:"left"===c},"bitmap"===l&&r.createElement(x,{width:1200,height:120,hasHoverStyle:!0,setElementCallback:h}),"vector"===l&&r.createElement(T,{width:1200,height:120,hasHoverStyle:!0,setElementCallback:h})))},_=e=>{const{loadedApp:a,type:t}=e,l=(0,r.useMemo)((()=>({interval:-1,type:"uint",styles:{shape:"line",grid:"rgba(255, 255, 255, 0.2)",font:{family:"Arial",size:"12px",style:"normal",weight:"normal"},width:1.5,right:15}})),[]),o=(0,r.useCallback)((e=>{a&&((0,s.X)("mixer").module("analyser").domain("time").setup(e).param(l),(0,s.X)("oneshot").module("analyser").domain("time").setup(e).param(l),(0,s.X)("audio").module("analyser").domain("time").setup(e).param(l),(0,s.X)("stream").module("analyser").domain("time").setup(e).param(l),(0,s.X)("noise").module("analyser").domain("time").setup(e).param(l))}),[a,l]);return r.createElement("dl",{className:"TimeAnalyser"},r.createElement("dt",null,"Time Domain"),r.createElement("dd",null,"bitmap"===t&&r.createElement(x,{width:420,height:120,hasHoverStyle:!1,setElementCallback:o}),"vector"===t&&r.createElement(T,{width:420,height:120,hasHoverStyle:!1,setElementCallback:o})))},w=e=>{const{loadedApp:a,type:t}=e,l=(0,r.useMemo)((()=>({interval:-1,type:"float",scale:"logarithmic",styles:{shape:"line",grid:"rgba(255, 255, 255, 0.2)",font:{family:"Arial",size:"12px",style:"normal",weight:"normal"},width:1,right:15,left:40}})),[]),o=(0,r.useCallback)((e=>{a&&((0,s.X)("mixer").module("analyser").domain("fft").setup(e).param(l),(0,s.X)("oneshot").module("analyser").domain("fft").setup(e).param(l),(0,s.X)("audio").module("analyser").domain("fft").setup(e).param(l),(0,s.X)("stream").module("analyser").domain("fft").setup(e).param(l),(0,s.X)("noise").module("analyser").domain("fft").setup(e).param(l))}),[a,l]);return r.createElement("dl",{className:"SpectrumAnalyser"},r.createElement("dt",null,"Frequency Domain"),r.createElement("dd",null,"bitmap"===t&&r.createElement(x,{width:420,height:120,hasHoverStyle:!1,setElementCallback:o}),"vector"===t&&r.createElement(T,{width:420,height:120,hasHoverStyle:!1,setElementCallback:o})))},S=e=>{const{loadedApp:a}=e,[t,l]=(0,r.useState)(!1),[n,m]=(0,r.useState)(!1),u=(0,o.v9)((e=>e.analyserState)),c=(0,r.useMemo)((()=>X()),[]),d=(0,r.useMemo)((()=>c.analyser?.visualizer||"vector"),[c]),i=(0,r.useCallback)((e=>{const a=e.currentTarget.checked;if(a)(0,s.X)("audio").module("analyser").domain("timeoverview",0).param({mode:"sprite"}),(0,s.X)("audio").module("analyser").domain("timeoverview",1).param({mode:"sprite"}),(0,s.X)("audio").param({loop:!0});else{const e=(0,s.X)("audio").param("currentTime"),a=(0,s.X)("audio").param("duration");(0,s.X)("audio").module("analyser").domain("timeoverview",0).param({mode:"update"}),(0,s.X)("audio").module("analyser").domain("timeoverview",1).param({mode:"update"}),(0,s.X)("audio").param({loop:!1}),(0,s.X)("audio").stop().start(e,a)}m(a)}),[]),p=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("analyser").domain("time").param({interval:a>0?a:-1}),(0,s.X)("mixer").module("analyser").domain("fft").param({interval:a>0?a:-1}),(0,s.X)("oneshot").module("analyser").domain("time").param({interval:a>0?a:-1}),(0,s.X)("oneshot").module("analyser").domain("fft").param({interval:a>0?a:-1}),(0,s.X)("audio").module("analyser").domain("time").param({interval:a>0?a:-1}),(0,s.X)("audio").module("analyser").domain("fft").param({interval:a>0?a:-1}),(0,s.X)("stream").module("analyser").domain("time").param({interval:a>0?a:-1}),(0,s.X)("stream").module("analyser").domain("fft").param({interval:a>0?a:-1}),(0,s.X)("noise").module("analyser").domain("time").param({interval:a>0?a:-1}),(0,s.X)("noise").module("analyser").domain("fft").param({interval:a>0?a:-1})}),[]),b=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("analyser").param({smoothingTimeConstant:a}),(0,s.X)("oneshot").module("analyser").param({smoothingTimeConstant:a}),(0,s.X)("audio").module("analyser").param({smoothingTimeConstant:a}),(0,s.X)("stream").module("analyser").param({smoothingTimeConstant:a}),(0,s.X)("noise").module("analyser").param({smoothingTimeConstant:a})}),[]);return(0,r.useEffect)((()=>{if(a){if(t){const e={fftSize:2048,minDecibels:-60,maxDecibels:0,smoothingTimeConstant:.8};return(0,s.X)("mixer").module("analyser").param(e),(0,s.X)("oneshot").module("analyser").param(e),(0,s.X)("audio").module("analyser").param(e),(0,s.X)("stream").module("analyser").param(e),(0,s.X)("noise").module("analyser").param(e),(0,s.X)("mixer").module("analyser").domain("time").activate(),(0,s.X)("mixer").module("analyser").domain("fft").activate(),(0,s.X)("oneshot").module("analyser").domain("time").activate(),(0,s.X)("oneshot").module("analyser").domain("fft").activate(),(0,s.X)("audio").module("analyser").domain("time").activate(),(0,s.X)("audio").module("analyser").domain("fft").activate(),(0,s.X)("stream").module("analyser").domain("time").activate(),(0,s.X)("stream").module("analyser").domain("fft").activate(),(0,s.X)("noise").module("analyser").domain("time").activate(),void(0,s.X)("noise").module("analyser").domain("fft").activate()}l(!0)}}),[a,t,u]),r.createElement("div",{id:"analyser-fieldset","aria-hidden":!u,className:"Analyser"+(u?" -active":"")},r.createElement("div",{className:"Analyser__viewer"},r.createElement(N,{loadedApp:a,active:u,type:d}),r.createElement(_,{loadedApp:a,type:d}),r.createElement(w,{loadedApp:a,type:d})),r.createElement("div",{className:"Analyser__controllers"},r.createElement(k,{label:"Audio Sprite",checked:n,labelAsText:!0,tabIndex:u?0:-1,onChange:i}),r.createElement(C,{direction:"right",space:12}),r.createElement(R,{label:"Interval",autoupdate:!1,defaultValue:0,min:0,max:1e3,step:10,width:"20%",tabIndex:u?0:-1,onChange:p}),r.createElement(C,{direction:"right",space:12}),r.createElement(R,{label:"Smoothing",autoupdate:!1,defaultValue:.8,min:0,max:1,step:.05,width:"20%",tabIndex:u?0:-1,onChange:b})))},O=e=>{const{active:a,label:t,width:l,height:o,image:s,size:n,onClick:m}=e;return r.createElement("button",{type:"button","aria-label":t,style:{width:`${l}px`,height:`${o}px`,backgroundImage:`url("${s}")`,backgroundSize:n},className:"Button"+(a?" -active":""),onClick:m})},I=e=>{const{accept:a,disabled:t,placeholder:l,filename:o,drag:s,drop:n,tabIndex:m,onChange:u,onDragEnter:c,onDragOver:d,onDragLeave:i,onDrop:p}=e,X=(0,r.useRef)(null),b=(0,r.useId)(),h=(0,r.useCallback)((()=>{const e=X.current;null!==e&&(e.value="",e.click())}),[]);return r.createElement("div",{className:`FileUploader${s?" -drag":""}${n?" -drop":""}`,onDragEnter:c,onDragOver:d,onDragLeave:i,onDrop:p},r.createElement("button",{type:"button","aria-controls":b,disabled:t,tabIndex:m,onClick:h},o||l),r.createElement("input",{type:"file",ref:X,id:b,accept:a,disabled:t,placeholder:l,tabIndex:-1,onChange:u}))},F=e=>{const{rate:a,label:t}=e,l="number"==typeof a,o="number"==typeof a?{width:`${a<=100?a:100}%`}:{},s=(0,r.useId)();return r.createElement("div",{className:"ProgressBar"},t?r.createElement("p",{id:s,className:"ProgressBar__label"},t):null,r.createElement("div",{className:"ProgressBar__wrapper"},r.createElement("div",{role:"presentation",className:"ProgressBar__mask"}),l?r.createElement("div",{role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-labelledby":s,style:o,className:"ProgressBar__bar"}):r.createElement("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,style:o,className:"ProgressBar__bar -auto"})))},U=e=>{const[a,t]=(0,r.useState)(!1),[l,o]=(0,r.useState)(""),[n,m]=(0,r.useState)(!0),[u,c]=(0,r.useState)(0),[d,p]=(0,r.useState)(0),[b,h]=(0,r.useState)(!1),[E,v]=(0,r.useState)(!1),[f,k]=(0,r.useState)(!1),[y,A]=(0,r.useState)(0),[x,T]=(0,r.useState)(0),[N,_]=(0,r.useState)(""),[w,S]=(0,r.useState)(!1),[U,Q]=(0,r.useState)(!1),[Y,M]=(0,r.useState)(!1),[D,$]=(0,r.useState)(!1),z=(0,r.useMemo)((()=>X()),[]),V=(0,r.useMemo)((()=>!0===z.audio?.playbackRate),[z]),q=(0,r.useCallback)((()=>{k(!0),A(0),T(0),M(!1),$(!0)}),[]),B=(0,r.useCallback)((e=>{const a=s.X.file({event:e.nativeEvent,type:"arraybuffer",successCallback:(a,t)=>{e.nativeEvent.target.value="",q(),(0,s.X)("audio").ready(t)},errorCallback:(e,a)=>{_(a),S(!0)},progressCallback:e=>{const{lengthComputable:a,loaded:t,total:r}=e;k(a),A(t),T(a&&r>0?Math.trunc(t/r*100):0),M(!0)}});null===a?(_("Please upload file"),S(!0)):"string"!=typeof a&&o(a.name)}),[q]),L=(0,r.useCallback)((e=>{e.preventDefault(),h(!0)}),[]),G=(0,r.useCallback)((e=>{e.preventDefault()}),[]),K=(0,r.useCallback)((e=>{e.preventDefault(),h(!1)}),[]),P=(0,r.useCallback)((e=>{const a=s.X.drop({event:e.nativeEvent,type:"arraybuffer",successCallback:(e,a)=>{q(),(0,s.X)("audio").ready(a)},errorCallback:(e,a)=>{_(a),S(!0)},progressCallback:e=>{const{lengthComputable:a,loaded:t,total:r}=e;k(a),A(t),T(a&&r>0?Math.trunc(t/r*100):0),M(!0)}});null===a?(_("Please drop file"),S(!0)):"string"!=typeof a&&o(a.name),h(!1),v(!0)}),[q]),H=(0,r.useCallback)((()=>{(0,s.X)("audio").has()&&((0,s.X)("audio").paused()?((0,s.X)("audio").start((0,s.X)("audio").param("currentTime")),(0,s.X)("audio").module("recorder").start(),m(!1)):((0,s.X)("audio").stop(),m(!0)))}),[]),j=(0,r.useCallback)((e=>{(0,s.X)("audio").param({currentTime:e.currentTarget.valueAsNumber}),c((0,s.X)("audio").param("currentTime"))}),[]),W=(0,r.useCallback)((e=>{(0,s.X)("audio").module("pitchshifter").param({pitch:e.currentTarget.valueAsNumber}),(0,s.X)("stream").module("pitchshifter").param({pitch:e.currentTarget.valueAsNumber})}),[]),J=(0,r.useCallback)((e=>{(0,s.X)("audio").param({playbackRate:e.currentTarget.valueAsNumber})}),[]),Z=(0,r.useCallback)((e=>{(0,s.X)("audio").module("vocalcanceler").param({depth:e.currentTarget.valueAsNumber})}),[]),ee=(0,r.useCallback)((()=>{S(!1),Q(!1)}),[]),ae=(0,r.useCallback)((e=>{p(e.duration),$(!1)}),[]),te=(0,r.useCallback)(((e,a)=>{c(a)}),[]),re=(0,r.useCallback)((()=>{m(!0),c(0),(0,s.X)("audio").module("analyser").domain("timeoverview",0).update(0),(0,s.X)("audio").module("analyser").domain("timeoverview",1).update(0)}),[]),le=(0,r.useCallback)((e=>{_(e.message),Q(!0)}),[]),oe=(0,r.useMemo)((()=>s.X.convertTime(u)),[u]),se=(0,r.useMemo)((()=>s.X.convertTime(d)),[d]),ne=(0,r.useMemo)((()=>`${i(oe)}`),[oe]),me=(0,r.useMemo)((()=>`${i(se)}`),[se]);return(0,r.useEffect)((()=>{e.loadedApp&&!a&&((0,s.X)("audio").setup({decodeCallback:ae,updateCallback:te,endedCallback:re,errorCallback:le}),t(!0))}),[e.loadedApp,a,ae,te,re,le]),r.createElement("div",{className:"AudioFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,"Audio"),r.createElement("div",{className:"AudioFieldset__selectAudio"},r.createElement(I,{accept:"audio/*, audio/mpeg, audio/ogg",disabled:!1,placeholder:"Audio File (wav, ogg, mp3 ... etc)",filename:l,drag:b,drop:E,onChange:B,onDragEnter:L,onDragOver:G,onDragLeave:K,onDrop:P}),r.createElement(O,{active:!n,label:n?"Start Audio":"Stop Audio",width:70,height:33,image:"/assets/images/button-audio.png",size:"70px 99px",onClick:H})),r.createElement(C,{space:20}),r.createElement(R,{label:`${ne} / ${me}`,autoupdate:!0,defaultValue:Math.trunc(u),min:0,max:d>0?d:0,step:1,onChange:j}),r.createElement(C,{space:8}),V?r.createElement(R,{label:"Playback Rate",autoupdate:!1,defaultValue:1,min:.05,max:2,step:.025,onChange:J}):r.createElement(R,{label:"Pitch Shifter",autoupdate:!1,defaultValue:1,min:.05,max:4,step:.025,onChange:W}),r.createElement(C,{space:8}),r.createElement(R,{label:"Vocal Canceler",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:Z})),r.createElement(g,{isShow:w,title:"Error",hasOverlay:!0,asAlert:!0,onClose:ee},N),r.createElement(g,{isShow:U,title:"Error",hasOverlay:!0,asAlert:!0,onClose:ee},N),r.createElement(g,{isShow:Y,title:"Progress ...",hasOverlay:!0,asAlert:!1},f?r.createElement(F,{label:`${y} bytes (${x} %)`,rate:x}):null),r.createElement(g,{isShow:D,title:"Decoding ...",hasOverlay:!0,asAlert:!1},f?r.createElement(F,null):null))};var Q=t(633);const Y=(0,Q.oM)({name:"slice",initialState:{activeMIDIKeyboardIndexes:[],analyserState:!1,currentSoundSource:"oscillator",downBassKeyboardIndexes:[],downMelodyKeyboardIndexes:[],mmlState:!1,oscillatorStates:[!0,!1],upBassKeyboardIndexes:[],upMelodyKeyboardIndexes:[]},reducers:{activateMIDIKeyboards:(e,a)=>{e.activeMIDIKeyboardIndexes=a.payload},changeAnalyserState:(e,a)=>{e.analyserState=a.payload},changeCurrentSoundSource:(e,a)=>{e.currentSoundSource=a.payload},changeMMLState:(e,a)=>{e.mmlState=a.payload},changeOscillatorStates:(e,a)=>{e.oscillatorStates=a.payload},downBassKeyboards:(e,a)=>{e.downBassKeyboardIndexes=a.payload},downMelodyKeyboards:(e,a)=>{e.downMelodyKeyboardIndexes=a.payload},upBassKeyboards:(e,a)=>{e.upBassKeyboardIndexes=a.payload},upMelodyKeyboards:(e,a)=>{e.upMelodyKeyboardIndexes=a.payload}}}),{activateMIDIKeyboards:M,changeAnalyserState:D,changeCurrentSoundSource:$,changeMMLState:z,changeOscillatorStates:V,downBassKeyboards:q,downMelodyKeyboards:B,upBassKeyboards:L,upMelodyKeyboards:G}=Y.actions,K=Y.reducer,P=e=>{const{label:a,values:t,texts:l,disabled:o,width:s,defaultValue:n,tabIndex:m,onChange:u}=e,c=(0,r.useId)();return r.createElement("div",{className:"Select",style:s?{width:s}:void 0},r.createElement("label",{htmlFor:c},a),r.createElement("select",{id:c,disabled:o,defaultValue:n,tabIndex:m,onChange:u},t.map(((e,a)=>r.createElement("option",{key:e,value:e},l[a])))))},H=({currentSoundSource:e})=>{const[a,t]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),[u,c]=(0,r.useState)(""),[d,i]=(0,r.useState)(!1),p=(0,o.I0)(),X=(0,r.useMemo)((()=>[]),[]),b=(0,r.useMemo)((()=>{switch(e){case"oscillator":return"oscillator";case"piano":case"guitar":case"electric-guitar":return"oneshot";default:return"noise"}}),[e]),h=(0,r.useMemo)((()=>{switch(e){case"oscillator":case"piano":default:return 0;case"guitar":return m;case"electric-guitar":return 176}}),[e]),E=(0,r.useCallback)(((e,a)=>{if(e<21||e>108)return;if(a<0||a>127)return;const t=e-21,r=a/127,l=[...X];if(l.push(t),"noise"===b)(0,s.X)("noise").start(),(0,s.X)("noise").module("recorder").start();else if("oscillator"===b){for(let e=0,a=(0,s.X)("oscillator").length();e<a;e++)0!==e&&((0,s.X)("oscillator").get(e).activate(),window.clonedXSound("oscillator").get(e).activate()),(0,s.X)("oscillator").get(e).param({volume:r}),window.clonedXSound("oscillator").get(e).param({volume:r});(0,s.X)("oscillator").ready(0,0).start(s.X.toFrequencies(l)),window.clonedXSound("oscillator").ready(0,0).start(s.X.toFrequencies(l)),(0,s.X)("mixer").start([(0,s.X)("oscillator"),window.clonedXSound("oscillator")],[r,r]),(0,s.X)("mixer").module("recorder").start()}else(0,s.X)("oneshot").reset(t,"volume",r).ready(0,0).start(l.map((e=>e+h))),(0,s.X)("oneshot").module("recorder").start();p(M(l))}),[p,b,X,h]),v=(0,r.useCallback)(((e,a)=>{if(e<21||e>108)return;if(a<0||a>127)return;const t=e-21,r=X.indexOf(t),l=[...X];if(-1!==r&&l.splice(r,1),"noise"===b)(0,s.X)("noise").stop(),(0,s.X)("noise").module("recorder").start();else if("oscillator"===b){(0,s.X)("oscillator").stop(),window.clonedXSound("oscillator").stop();for(let e=0,a=(0,s.X)("oscillator").length();e<a;e++)0!==e&&((0,s.X)("oscillator").get(e).deactivate(),window.clonedXSound("oscillator").get(e).deactivate())}else(0,s.X)("oneshot").stop(l.map((e=>e+h))).reset(t,"volume",1);p(M(l))}),[p,b,X,h]),f=(0,r.useCallback)(((e,a,t)=>{a[0]&&(a[0].onmidimessage=e=>{switch(240&e.data[0]){case 144:E(e.data[1],e.data[2]);break;case 128:v(e.data[1],e.data[2])}}),t.length}),[E,v]),C=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").param({mastervolume:a}),(0,s.X)("oneshot").param({mastervolume:a}),(0,s.X)("audio").param({mastervolume:a}),(0,s.X)("stream").param({mastervolume:a}),(0,s.X)("noise").param({mastervolume:a})}),[]),y=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("oscillator").module("glide").param({time:a}),window.clonedXSound("oscillator").module("glide").param({time:a})}),[]),A=(0,r.useCallback)((e=>{(0,s.X)("oneshot").param({transpose:e.currentTarget.valueAsNumber})}),[]),x=(0,r.useCallback)((e=>{(0,s.X)("mixer").module("analyser").stop("time").domain("time").clear(),(0,s.X)("mixer").module("analyser").stop("fft").domain("fft").clear(),(0,s.X)("oneshot").module("analyser").stop("time").domain("time").clear(),(0,s.X)("oneshot").module("analyser").stop("fft").domain("fft").clear(),(0,s.X)("audio").module("analyser").stop("time").domain("time").clear(),(0,s.X)("audio").module("analyser").stop("fft").domain("fft").clear(),(0,s.X)("stream").module("analyser").stop("time").domain("time").clear(),(0,s.X)("stream").module("analyser").stop("fft").domain("fft").clear();const a=e.currentTarget.value;switch(a){case"oscillator":case"piano":case"guitar":case"electric-guitar":case"whitenoise":case"pinknoise":case"browniannoise":case"stream":case"midi":break;default:return}switch(a.endsWith("noise")||((0,s.X)("noise").module("analyser").stop("time").domain("time").clear(),(0,s.X)("noise").module("analyser").stop("fft").domain("fft").clear()),p($(a)),(0,s.X)("stream").clear(),a){case"stream":(0,s.X)("stream").ready().then((()=>{(0,s.X)("stream").start()})).catch((e=>{}));break;case"midi":(0,s.X)("midi").setup({options:{sysex:!0},successCallback:(e,a,t)=>{f(e,a,t)},errorCallback:()=>{c("Cannot use Web MIDI API."),i(!0)}})}}),[p,f]),T=(0,r.useCallback)((e=>{p(D(e.currentTarget.checked)),t(!a)}),[p,a]),N=(0,r.useCallback)((e=>{p(z(e.currentTarget.checked)),n(!l)}),[p,l]),_=(0,r.useCallback)((()=>{c(""),i(!1)}),[]);return r.createElement("div",{className:"BasicControllers"},r.createElement(R,{label:"Master Volume",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,width:"20%",onChange:C}),r.createElement(R,{label:"Glide",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,width:"20%",onChange:y}),r.createElement(R,{label:"Transpose",autoupdate:!1,defaultValue:0,min:-6,max:6,step:1,width:"20%",onChange:A}),r.createElement(P,{label:"Select Sound Source",values:["oscillator","piano","guitar","electric-guitar","whitenoise","pinknoise","browniannoise","stream","midi"],texts:["oscillator","piano","A. guitar","E. guitar","white noise","pink noise","brownian noise","microphone","MIDI"],disabled:!1,width:"20%",onChange:x}),r.createElement(k,{label:"Analyser",checked:a,labelAsText:!0,controls:"analyser-fieldset",onChange:T}),r.createElement(k,{label:"MML",checked:l,labelAsText:!0,controls:"mml-fieldset",onChange:N}),r.createElement(g,{isShow:d,title:"Error",hasOverlay:!0,asAlert:!0,onClose:_},u))},j=()=>{const[e,a]=(0,r.useState)(!1),[t,l]=(0,r.useState)("overdrive"),o=(0,r.useCallback)((e=>{const r=e.currentTarget.checked;if(r)switch(t){case"overdrive":(0,s.X)("mixer").module("overdrive").activate(),(0,s.X)("oneshot").module("overdrive").activate(),(0,s.X)("audio").module("overdrive").activate(),(0,s.X)("stream").module("overdrive").activate(),(0,s.X)("noise").module("overdrive").activate(),(0,s.X)("mixer").module("fuzz").deactivate(),(0,s.X)("oneshot").module("fuzz").deactivate(),(0,s.X)("audio").module("fuzz").deactivate(),(0,s.X)("stream").module("fuzz").deactivate(),(0,s.X)("noise").module("fuzz").deactivate();break;case"fuzz":(0,s.X)("mixer").module("fuzz").activate(),(0,s.X)("oneshot").module("fuzz").activate(),(0,s.X)("audio").module("fuzz").activate(),(0,s.X)("stream").module("fuzz").activate(),(0,s.X)("noise").module("fuzz").activate(),(0,s.X)("mixer").module("overdrive").deactivate(),(0,s.X)("oneshot").module("overdrive").deactivate(),(0,s.X)("audio").module("overdrive").deactivate(),(0,s.X)("stream").module("overdrive").deactivate(),(0,s.X)("noise").module("overdrive").deactivate()}else(0,s.X)("mixer").module("overdrive").deactivate(),(0,s.X)("oneshot").module("overdrive").deactivate(),(0,s.X)("audio").module("overdrive").deactivate(),(0,s.X)("stream").module("overdrive").deactivate(),(0,s.X)("noise").module("overdrive").deactivate(),(0,s.X)("mixer").module("fuzz").deactivate(),(0,s.X)("oneshot").module("fuzz").deactivate(),(0,s.X)("audio").module("fuzz").deactivate(),(0,s.X)("stream").module("fuzz").deactivate(),(0,s.X)("noise").module("fuzz").deactivate();a(r)}),[t]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.value;switch(a){case"overdrive":case"fuzz":l(a)}}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("overdrive").param({drive:a}),(0,s.X)("oneshot").module("overdrive").param({drive:a}),(0,s.X)("audio").module("overdrive").param({drive:a}),(0,s.X)("stream").module("overdrive").param({drive:a}),(0,s.X)("noise").module("overdrive").param({drive:a}),(0,s.X)("mixer").module("fuzz").param({drive:a}),(0,s.X)("oneshot").module("fuzz").param({drive:a}),(0,s.X)("audio").module("fuzz").param({drive:a}),(0,s.X)("stream").module("fuzz").param({drive:a}),(0,s.X)("noise").module("fuzz").param({drive:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("overdrive").param({level:a}),(0,s.X)("oneshot").module("overdrive").param({level:a}),(0,s.X)("audio").module("overdrive").param({level:a}),(0,s.X)("stream").module("overdrive").param({level:a}),(0,s.X)("noise").module("overdrive").param({level:a}),(0,s.X)("mixer").module("fuzz").param({level:a}),(0,s.X)("oneshot").module("fuzz").param({level:a}),(0,s.X)("audio").module("fuzz").param({level:a}),(0,s.X)("stream").module("fuzz").param({level:a}),(0,s.X)("noise").module("fuzz").param({level:a})}),[]);return r.createElement("div",{className:"BoosterFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"OD/DS",checked:e,labelAsText:!1,onChange:o})),r.createElement(P,{label:"Select OD/DS",values:["overdrive","fuzz"],texts:["overdrive","fuzz"],disabled:!1,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Drive",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Level",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:u})))},W=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("chorus").activate(),(0,s.X)("oneshot").module("chorus").activate(),(0,s.X)("audio").module("chorus").activate(),(0,s.X)("stream").module("chorus").activate(),(0,s.X)("noise").module("chorus").activate()):((0,s.X)("mixer").module("chorus").deactivate(),(0,s.X)("oneshot").module("chorus").deactivate(),(0,s.X)("audio").module("chorus").deactivate(),(0,s.X)("stream").module("chorus").deactivate(),(0,s.X)("noise").module("chorus").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber/1e3;(0,s.X)("mixer").module("chorus").param({time:a}),(0,s.X)("oneshot").module("chorus").param({time:a}),(0,s.X)("audio").module("chorus").param({time:a}),(0,s.X)("stream").module("chorus").param({time:a}),(0,s.X)("noise").module("chorus").param({time:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("chorus").param({depth:a}),(0,s.X)("oneshot").module("chorus").param({depth:a}),(0,s.X)("audio").module("chorus").param({depth:a}),(0,s.X)("stream").module("chorus").param({depth:a}),(0,s.X)("noise").module("chorus").param({depth:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("chorus").param({rate:a}),(0,s.X)("oneshot").module("chorus").param({rate:a}),(0,s.X)("audio").module("chorus").param({rate:a}),(0,s.X)("stream").module("chorus").param({rate:a}),(0,s.X)("noise").module("chorus").param({rate:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("chorus").param({mix:a}),(0,s.X)("oneshot").module("chorus").param({mix:a}),(0,s.X)("audio").module("chorus").param({mix:a}),(0,s.X)("stream").module("chorus").param({mix:a}),(0,s.X)("noise").module("chorus").param({mix:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("chorus").param({tone:a}),(0,s.X)("oneshot").module("chorus").param({tone:a}),(0,s.X)("audio").module("chorus").param({tone:a}),(0,s.X)("stream").module("chorus").param({tone:a}),(0,s.X)("noise").module("chorus").param({tone:a})}),[]);return r.createElement("div",{className:"ChorusFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Chorus",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Time",autoupdate:!1,defaultValue:0,min:0,max:50,step:1,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:1,step:.01,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:1,step:.01,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Mix",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Tone",autoupdate:!1,defaultValue:4e3,min:20,max:8e3,step:1,onChange:u}),r.createElement(C,{space:8})))},J=()=>{const[e,a]=(0,r.useState)(!0),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("compressor").activate(),(0,s.X)("oneshot").module("compressor").activate(),(0,s.X)("audio").module("compressor").activate(),(0,s.X)("stream").module("compressor").activate(),(0,s.X)("noise").module("compressor").activate()):((0,s.X)("mixer").module("compressor").deactivate(),(0,s.X)("oneshot").module("compressor").deactivate(),(0,s.X)("audio").module("compressor").deactivate(),(0,s.X)("stream").module("compressor").deactivate(),(0,s.X)("noise").module("compressor").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("compressor").param({threshold:a}),(0,s.X)("oneshot").module("compressor").param({threshold:a}),(0,s.X)("audio").module("compressor").param({threshold:a}),(0,s.X)("stream").module("compressor").param({threshold:a}),(0,s.X)("noise").module("compressor").param({threshold:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("compressor").param({knee:a}),(0,s.X)("oneshot").module("compressor").param({knee:a}),(0,s.X)("audio").module("compressor").param({knee:a}),(0,s.X)("stream").module("compressor").param({knee:a}),(0,s.X)("noise").module("compressor").param({knee:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("compressor").param({ratio:a}),(0,s.X)("oneshot").module("compressor").param({ratio:a}),(0,s.X)("audio").module("compressor").param({ratio:a}),(0,s.X)("stream").module("compressor").param({ratio:a}),(0,s.X)("noise").module("compressor").param({ratio:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("compressor").param({attack:a}),(0,s.X)("oneshot").module("compressor").param({attack:a}),(0,s.X)("audio").module("compressor").param({attack:a}),(0,s.X)("stream").module("compressor").param({attack:a}),(0,s.X)("noise").module("compressor").param({attack:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("compressor").param({release:a}),(0,s.X)("oneshot").module("compressor").param({release:a}),(0,s.X)("audio").module("compressor").param({release:a}),(0,s.X)("stream").module("compressor").param({release:a}),(0,s.X)("noise").module("compressor").param({release:a})}),[]);return r.createElement("div",{className:"CompressorFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Compressor",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Threshold",autoupdate:!1,defaultValue:-24,min:-100,max:0,step:1,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Knee",autoupdate:!1,defaultValue:30,min:0,max:40,step:1,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Ratio",autoupdate:!1,defaultValue:12,min:1,max:20,step:1,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Attack",autoupdate:!1,defaultValue:.003,min:0,max:1,step:.001,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Release",autoupdate:!1,defaultValue:.25,min:.01,max:1,step:.01,onChange:u}),r.createElement(C,{space:8})))},Z=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("delay").activate(),(0,s.X)("oneshot").module("delay").activate(),(0,s.X)("audio").module("delay").activate(),(0,s.X)("stream").module("delay").activate(),(0,s.X)("noise").module("delay").activate()):((0,s.X)("mixer").module("delay").deactivate(),(0,s.X)("oneshot").module("delay").deactivate(),(0,s.X)("audio").module("delay").deactivate(),(0,s.X)("stream").module("delay").deactivate(),(0,s.X)("noise").module("delay").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber/1e3;(0,s.X)("mixer").module("delay").param({time:a}),(0,s.X)("oneshot").module("delay").param({time:a}),(0,s.X)("audio").module("delay").param({time:a}),(0,s.X)("stream").module("delay").param({time:a}),(0,s.X)("noise").module("delay").param({time:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("delay").param({dry:a}),(0,s.X)("oneshot").module("delay").param({dry:a}),(0,s.X)("audio").module("delay").param({dry:a}),(0,s.X)("stream").module("delay").param({dry:a}),(0,s.X)("noise").module("delay").param({dry:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("delay").param({wet:a}),(0,s.X)("oneshot").module("delay").param({wet:a}),(0,s.X)("audio").module("delay").param({wet:a}),(0,s.X)("stream").module("delay").param({wet:a}),(0,s.X)("noise").module("delay").param({wet:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("delay").param({tone:a}),(0,s.X)("oneshot").module("delay").param({tone:a}),(0,s.X)("audio").module("delay").param({tone:a}),(0,s.X)("stream").module("delay").param({tone:a}),(0,s.X)("noise").module("delay").param({tone:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("delay").param({feedback:a}),(0,s.X)("oneshot").module("delay").param({feedback:a}),(0,s.X)("audio").module("delay").param({feedback:a}),(0,s.X)("stream").module("delay").param({feedback:a}),(0,s.X)("noise").module("delay").param({feedback:a})}),[]);return r.createElement("div",{className:"DelayFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Delay",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Time",autoupdate:!1,defaultValue:0,min:0,max:1e3,step:1,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Dry",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Wet",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Tone",autoupdate:!1,defaultValue:4e3,min:20,max:8e3,step:1,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Feedback",autoupdate:!1,defaultValue:0,min:0,max:.95,step:.05,onChange:u}),r.createElement(C,{space:8})))},ee=()=>{const e=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("oscillator").module("envelopegenerator").param({attack:a}),window.clonedXSound("oscillator").module("envelopegenerator").param({attack:a}),(0,s.X)("oneshot").module("envelopegenerator").param({attack:a}),(0,s.X)("noise").module("envelopegenerator").param({attack:a})}),[]),a=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("oscillator").module("envelopegenerator").param({decay:a}),window.clonedXSound("oscillator").module("envelopegenerator").param({decay:a}),(0,s.X)("oneshot").module("envelopegenerator").param({decay:a}),(0,s.X)("noise").module("envelopegenerator").param({decay:a})}),[]),t=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("oscillator").module("envelopegenerator").param({sustain:a}),window.clonedXSound("oscillator").module("envelopegenerator").param({sustain:a}),(0,s.X)("oneshot").module("envelopegenerator").param({sustain:a}),(0,s.X)("noise").module("envelopegenerator").param({sustain:a})}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("oscillator").module("envelopegenerator").param({release:a}),window.clonedXSound("oscillator").module("envelopegenerator").param({release:a}),(0,s.X)("oneshot").module("envelopegenerator").param({release:a}),(0,s.X)("noise").module("envelopegenerator").param({release:a})}),[]);return r.createElement("div",{className:"EnvelopeGeneratorFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,"Envelope Generator"),r.createElement(R,{label:"Attack",autoupdate:!1,defaultValue:.01,min:0,max:1,step:.01,onChange:e}),r.createElement(C,{space:8}),r.createElement(R,{label:"Decay",autoupdate:!1,defaultValue:.3,min:0,max:1,step:.01,onChange:a}),r.createElement(C,{space:8}),r.createElement(R,{label:"Sustain",autoupdate:!1,defaultValue:.5,min:0,max:1,step:.01,onChange:t}),r.createElement(C,{space:8}),r.createElement(R,{label:"Release",autoupdate:!1,defaultValue:1,min:0,max:1,step:.01,onChange:l}),r.createElement(C,{space:8})))},ae=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("filter").activate(),(0,s.X)("oneshot").module("filter").activate(),(0,s.X)("audio").module("filter").activate(),(0,s.X)("stream").module("filter").activate(),(0,s.X)("noise").module("filter").activate()):((0,s.X)("mixer").module("filter").deactivate(),(0,s.X)("oneshot").module("filter").deactivate(),(0,s.X)("audio").module("filter").deactivate(),(0,s.X)("stream").module("filter").deactivate(),(0,s.X)("noise").module("filter").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.value;switch(a){case"lowpass":case"highpass":case"bandpass":case"lowshelf":case"highshelf":case"peaking":case"notch":case"allpass":(0,s.X)("mixer").module("filter").param({type:a}),(0,s.X)("oneshot").module("filter").param({type:a}),(0,s.X)("audio").module("filter").param({type:a}),(0,s.X)("stream").module("filter").param({type:a}),(0,s.X)("noise").module("filter").param({type:a})}}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({frequency:a}),(0,s.X)("oneshot").module("filter").param({frequency:a}),(0,s.X)("audio").module("filter").param({frequency:a}),(0,s.X)("stream").module("filter").param({frequency:a}),(0,s.X)("noise").module("filter").param({frequency:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({Q:a}),(0,s.X)("oneshot").module("filter").param({Q:a}),(0,s.X)("audio").module("filter").param({Q:a}),(0,s.X)("stream").module("filter").param({Q:a}),(0,s.X)("noise").module("filter").param({Q:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({gain:a}),(0,s.X)("oneshot").module("filter").param({gain:a}),(0,s.X)("audio").module("filter").param({gain:a}),(0,s.X)("stream").module("filter").param({gain:a}),(0,s.X)("noise").module("filter").param({gain:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({attack:a}),(0,s.X)("oneshot").module("filter").param({attack:a}),(0,s.X)("audio").module("filter").param({attack:a}),(0,s.X)("stream").module("filter").param({attack:a}),(0,s.X)("noise").module("filter").param({attack:a})}),[]),c=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({decay:a}),(0,s.X)("oneshot").module("filter").param({decay:a}),(0,s.X)("audio").module("filter").param({decay:a}),(0,s.X)("stream").module("filter").param({decay:a}),(0,s.X)("noise").module("filter").param({decay:a})}),[]),d=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({sustain:a}),(0,s.X)("oneshot").module("filter").param({sustain:a}),(0,s.X)("audio").module("filter").param({sustain:a}),(0,s.X)("stream").module("filter").param({sustain:a}),(0,s.X)("noise").module("filter").param({sustain:a})}),[]),i=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("filter").param({release:a}),(0,s.X)("oneshot").module("filter").param({release:a}),(0,s.X)("audio").module("filter").param({release:a}),(0,s.X)("stream").module("filter").param({release:a}),(0,s.X)("noise").module("filter").param({release:a})}),[]);return r.createElement("div",{className:"FilterFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Filter",checked:e,labelAsText:!1,onChange:t})),r.createElement(P,{label:"Select Filter",values:["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"],texts:["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"],disabled:!1,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Frequency",autoupdate:!1,defaultValue:8e3,min:20,max:22050,step:1,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Quality",autoupdate:!1,defaultValue:1,min:1,max:20,step:1,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Gain",autoupdate:!1,defaultValue:0,min:-18,max:18,step:1,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Attack",autoupdate:!1,defaultValue:.01,min:0,max:1,step:.01,onChange:u}),r.createElement(C,{space:8}),r.createElement(R,{label:"Decay",autoupdate:!1,defaultValue:.3,min:0,max:1,step:.01,onChange:c}),r.createElement(C,{space:8}),r.createElement(R,{label:"Sustain",autoupdate:!1,defaultValue:.5,min:0,max:1,step:.01,onChange:d}),r.createElement(C,{space:8}),r.createElement(R,{label:"Release",autoupdate:!1,defaultValue:1,min:0,max:1,step:.01,onChange:i}),r.createElement(C,{space:8})))},te=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("flanger").activate(),(0,s.X)("oneshot").module("flanger").activate(),(0,s.X)("audio").module("flanger").activate(),(0,s.X)("stream").module("flanger").activate(),(0,s.X)("noise").module("flanger").activate()):((0,s.X)("mixer").module("flanger").deactivate(),(0,s.X)("oneshot").module("flanger").deactivate(),(0,s.X)("audio").module("flanger").deactivate(),(0,s.X)("stream").module("flanger").deactivate(),(0,s.X)("noise").module("flanger").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber/1e3;(0,s.X)("mixer").module("flanger").param({time:a}),(0,s.X)("oneshot").module("flanger").param({time:a}),(0,s.X)("audio").module("flanger").param({time:a}),(0,s.X)("stream").module("flanger").param({time:a}),(0,s.X)("noise").module("flanger").param({time:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("flanger").param({depth:a}),(0,s.X)("oneshot").module("flanger").param({depth:a}),(0,s.X)("audio").module("flanger").param({depth:a}),(0,s.X)("stream").module("flanger").param({depth:a}),(0,s.X)("noise").module("flanger").param({depth:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("flanger").param({rate:a}),(0,s.X)("oneshot").module("flanger").param({rate:a}),(0,s.X)("audio").module("flanger").param({rate:a}),(0,s.X)("stream").module("flanger").param({rate:a}),(0,s.X)("noise").module("flanger").param({rate:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("flanger").param({mix:a}),(0,s.X)("oneshot").module("flanger").param({mix:a}),(0,s.X)("audio").module("flanger").param({mix:a}),(0,s.X)("stream").module("flanger").param({mix:a}),(0,s.X)("noise").module("flanger").param({mix:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("flanger").param({tone:a}),(0,s.X)("oneshot").module("flanger").param({tone:a}),(0,s.X)("audio").module("flanger").param({tone:a}),(0,s.X)("stream").module("flanger").param({tone:a}),(0,s.X)("noise").module("flanger").param({tone:a})}),[]),c=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("flanger").param({feedback:a}),(0,s.X)("oneshot").module("flanger").param({feedback:a}),(0,s.X)("audio").module("flanger").param({feedback:a}),(0,s.X)("stream").module("flanger").param({feedback:a}),(0,s.X)("noise").module("flanger").param({feedback:a})}),[]);return r.createElement("div",{className:"FlangerFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Flanger",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Time",autoupdate:!1,defaultValue:0,min:0,max:10,step:.05,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:1,step:.01,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:10,step:.05,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Mix",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Tone",autoupdate:!1,defaultValue:4e3,min:20,max:8e3,step:1,onChange:u}),r.createElement(C,{space:8}),r.createElement(R,{label:"Feedback",autoupdate:!1,defaultValue:0,min:0,max:.95,step:.05,onChange:c}),r.createElement(C,{space:8})))},re=()=>r.createElement("footer",{className:"Footer"},r.createElement("p",null,"Copyright (c) 2012"," ",r.createElement("a",{href:"https://github.com/Korilakkuma",target:"_blank",rel:"noopener noreferrer"},"Tomohiro IKEDA")),r.createElement("p",null,r.createElement("a",{href:"https://maoudamashii.jokersounds.com/",target:"_blank",rel:"noopener noreferrer",lang:"ja"},"音楽素材/魔王魂"))),le=({loadedApp:e,progress:a,rate:t,onClickSetupCallback:l})=>{const o=(0,r.useRef)(null),[s,n]=(0,r.useState)(!1),m=(0,r.useMemo)((()=>e&&t>=100),[e,t]),u=(0,r.useCallback)((()=>{n(!0)}),[]);(0,r.useEffect)((()=>{const e=document.getElementById("app");if(null===e)return;const a=e=>Array.from(document.querySelectorAll('[aria-hidden="true"]')).some((a=>a.contains(e)));m?Array.from(e.querySelectorAll(c)).filter((e=>null!==o.current&&!o.current.contains(e)&&!a(e)&&"-1"===e.getAttribute("tabindex"))).forEach((e=>{"switch"===e.getAttribute("role")?e.setAttribute("tabindex","0"):"checkbox"===e.getAttribute("type")||"file"===e.getAttribute("type")?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")})):s&&Array.from(e.querySelectorAll(c)).filter((e=>null!==o.current&&!o.current.contains(e)&&!a(e)&&"-1"!==e.getAttribute("tabindex"))).forEach((e=>{e.setAttribute("tabindex","-1")}))}),[s,m]);const d=(0,r.useId)(),i=(0,r.useMemo)((()=>`header-label-${d}`),[d]),p=(0,r.useMemo)((()=>`header-describe-${d}`),[d]);return r.createElement("header",{ref:o,role:"dialog",hidden:m,"aria-modal":!m,"aria-labelledby":i,"aria-describedby":p,className:"Header"+(a?" -progress":" -fadeIn"),onAnimationEnd:u},r.createElement("div",{hidden:a},r.createElement("div",{className:"Header__forkMeOnGitHub"},r.createElement("a",{href:"https://github.com/Korilakkuma/XSound.app",target:"_blank",rel:"noopener noreferrer"},"Fork me on GitHub")),r.createElement("div",null,r.createElement("h1",{id:i,className:"Header__logo"},r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"XSound.app",width:"200",height:"100"}),r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"",width:"200",height:"100"}),r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"",width:"200",height:"100"}),r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"",width:"200",height:"100"}),r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"",width:"200",height:"100"}),r.createElement("img",{src:"/assets/images/logo-v09.png",alt:"",width:"200",height:"100"})),r.createElement("div",{id:p,className:"Header__intro"},r.createElement("span",{className:"Header__moveLeft"},"XSound.app is Web Music Application by XSound (Web Audio API Library)."),r.createElement("span",{className:"Header__moveRight"},"Synthesizer, Effects, Visualization, Multi-Track Recording, Visual Audio Sprite ..."),r.createElement("span",{className:"Header__moveLeft"},"Moreover, enable to use external devices such as Audio Interfaces, MIDI.")),r.createElement("nav",{className:"Header__startButton"},r.createElement("button",{type:"button",onClick:l},"Start Application")))),a?r.createElement(F,{label:`Now Loading ... (${t} %)`,rate:t}):null)},oe=e=>{const{isShow:a,hasOverlay:t,title:l,first:o,second:s,children:n,onClose:m}=e;return r.createElement("div",{className:"SelectableModal"},r.createElement(g,{isShow:a,hasOverlay:t,title:l,asAlert:!1,onClose:m},r.createElement("div",{className:"SelectableModal__contents"},n),r.createElement("div",{className:"SelectableModal__buttons"},r.createElement("button",{type:"button",onClick:o.action},o.label),r.createElement("button",{type:"button",onClick:s.action},s.label))))},se=/<span class="x-highlight">(.+?)<\/span>/g,ne=["",""],me=({loadedApp:e,currentSoundSource:a})=>{const[t,l]=(0,r.useState)(!1),[n,m]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[i,X]=(0,r.useState)(""),[b,h]=(0,r.useState)(""),[E,v]=(0,r.useState)(0),[f,y]=(0,r.useState)(0),[A,R]=(0,r.useState)(""),[x,T]=(0,r.useState)(""),[N,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[O,U]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(0),[M,D]=(0,r.useState)(0),[$,z]=(0,r.useState)(['{"melody":"","bass":""}']),[K,P]=(0,r.useState)(["SAMPLE MML"]),[H,j]=(0,r.useState)(""),[W,J]=(0,r.useState)(""),[Z,ee]=(0,r.useState)(""),[ae,te]=(0,r.useState)(!1),[re,le]=(0,r.useState)(!1),[me,ue]=(0,r.useState)(!1),ce=(0,o.I0)(),de=(0,o.v9)((e=>e.mmlState)),ie=(0,r.useCallback)(((e,t)=>{const r=e.replace(se,"$1"),l=t.replace(se,"$1");switch(a){case"oscillator":(0,s.X)("mml").ready({source:(0,s.X)("oscillator"),mmls:[r]}),window.clonedXSound("mml").ready({source:window.clonedXSound("oscillator"),mmls:[l]});break;case"piano":(0,s.X)("mml").ready({source:(0,s.X)("oneshot"),mmls:[r,l],offset:0});break;case"guitar":(0,s.X)("mml").ready({source:(0,s.X)("oneshot"),mmls:[r,l],offset:u});break;case"electric-guitar":(0,s.X)("mml").ready({source:(0,s.X)("oneshot"),mmls:[r,l],offset:176});break;case"whitenoise":case"pinknoise":case"browniannoise":(0,s.X)("mml").ready({source:(0,s.X)("noise"),mmls:[r]}),window.clonedXSound("mml").ready({source:(0,s.X)("noise"),mmls:[l]})}}),[a]),pe=(0,r.useCallback)((e=>{ce(B(e.indexes)),X((0,s.X)("mml").getMML(0)??"");const a=(0,s.X)("mml").getMML(1);a&&h(a)}),[ce]),Xe=(0,r.useCallback)((e=>{ce(q(e.indexes)),h(window.clonedXSound("mml").getMML(0)??"")}),[ce]),be=(0,r.useCallback)((e=>{ce(G(e.indexes))}),[ce]),he=(0,r.useCallback)((e=>{ce(L(e.indexes))}),[ce]),Ee=(0,r.useCallback)((()=>{for(let e=0,a=(0,s.X)("oscillator").length();e<a;e++)0!==e&&((0,s.X)("oscillator").get(e).deactivate(),window.clonedXSound("oscillator").get(e).deactivate());ce(B([])),ce(q([]));const e=(0,s.X)("mml").getMML(0)?.replace(se,"$1")??"",a=(0,s.X)("mml").getMML(1)?(0,s.X)("mml").getMML(1)?.replace(se,"$1")??"":window.clonedXSound("mml").getMML(0)?.replace(se,"$1")??"";ie(e,a),X(e),h(a),m(!0)}),[ce,ie]),ve=(0,r.useCallback)((e=>{const a=e.token;switch(a.type){case"TEMPO":case"OCTAVE":case"NOTE":case"REST":case"TIE":J(`${a.token.toUpperCase()} is invalid`);break;default:J("MML is invalid")}}),[]),ge=(0,r.useCallback)((e=>{const a=e.token;switch(a.type){case"TEMPO":case"OCTAVE":case"NOTE":case"REST":case"TIE":ee(`${a.token.toUpperCase()} is invalid`);break;default:ee("MML is invalid")}}),[]),fe=(0,r.useCallback)((e=>{if(null===e.currentTarget||null===e.currentTarget.textContent)return;const a=e.currentTarget.textContent;X(a),m(!0)}),[]),Ce=(0,r.useCallback)((e=>{if(null===e.currentTarget||null===e.currentTarget.textContent)return;const a=e.currentTarget.textContent;h(a),m(!0)}),[]),ke=(0,r.useCallback)((()=>{if(n)if(J(""),ee(""),ie(i,b),(0,s.X)("mml").currentIndex(0,E),window.clonedXSound("mml").currentIndex(0,f),"oscillator"===a){for(let e=0,a=(0,s.X)("oscillator").length();e<a;e++)(0,s.X)("oscillator").get(e).activate(),window.clonedXSound("oscillator").get(e).activate();(0,s.X)("mml").start(0,!0),window.clonedXSound("mml").start(0,!0),(0,s.X)("mixer").start([(0,s.X)("oscillator"),window.clonedXSound("oscillator")],[1,1]),(0,s.X)("mixer").module("recorder").start(),ce(V([!0,!0]))}else a.endsWith("noise")?((0,s.X)("mml").start(0,!0),window.clonedXSound("mml").start(0,!0),(0,s.X)("mixer").module("recorder").start()):((0,s.X)("mml").start(0,!0),(0,s.X)("mml").start(1,!0),(0,s.X)("oneshot").module("recorder").start());else{v((0,s.X)("mml").currentIndex(0)),y(window.clonedXSound("mml").currentIndex(0)),(0,s.X)("mml").stop(),window.clonedXSound("mml").stop();for(let e=0,a=(0,s.X)("oscillator").length();e<a;e++)0!==e&&(0,s.X)("oscillator").get(e).deactivate(),window.clonedXSound("oscillator").get(e).deactivate()}m(!n)}),[ce,a,n,i,b,E,f,ie]),ye=(0,r.useCallback)((()=>{(0,s.X)("mml").stop(),window.clonedXSound("mml").stop(),ce(B([])),ce(q([]));const e=i.replace(se,"$1"),a=b.replace(se,"$1");X(e),h(a),v(0),y(0),m(!0)}),[ce,i,b]),Ae=(0,r.useCallback)((()=>{const e=i.replace(se,"$1"),a=b.replace(se,"$1"),t=JSON.stringify({title:"",artist:"",description:"",melody:e,bass:a});R(s.X.toTextFile(t,!0))}),[i,b]),Re=(0,r.useCallback)((e=>{d(e.currentTarget.checked)}),[]),xe=(0,r.useCallback)((e=>{const a=s.X.file({event:e.nativeEvent,type:"json",successCallback:(a,t)=>{e.nativeEvent.target.value="",i||b?(ne[0]=t.melody,ne[1]=t.bass,ue(!0)):(ie(t.melody,t.bass),X(t.melody),h(t.bass)),U(!1),le(!1)},errorCallback:(e,a)=>{U(!1),j(a),te(!0)},progressCallback:e=>{const{lengthComputable:a,loaded:t,total:r}=e;U(a),Y(t),D(a&&r>0?Math.trunc(t/r*100):0),le(!0)}});null===a?(j("Please upload file"),te(!0)):"string"!=typeof a&&T(a.name)}),[i,b,ie]),Te=(0,r.useCallback)((e=>{e.preventDefault(),_(!0)}),[]),Ne=(0,r.useCallback)((e=>{e.preventDefault()}),[]),_e=(0,r.useCallback)((e=>{e.preventDefault(),_(!1)}),[]),we=(0,r.useCallback)((e=>{e.preventDefault();const a=s.X.drop({event:e.nativeEvent,type:"json",successCallback:(e,a)=>{i||b?(ne[0]=a.melody,ne[1]=a.bass,ue(!0)):(ie(a.melody,a.bass),X(a.melody),h(a.bass)),U(!1),le(!1)},errorCallback:(e,a)=>{U(!1),j(a),te(!0)},progressCallback:e=>{const{lengthComputable:a,loaded:t,total:r}=e;U(a),Y(t),D(a&&r>0?Math.trunc(t/r*100):0),le(!0)}});null===a?(j("Please drop file"),te(!0)):"string"!=typeof a&&T(a.name),_(!1),S(!0)}),[i,b,ie]),Se=(0,r.useCallback)((()=>{te(!1)}),[]),Oe=(0,r.useCallback)((()=>{ie(ne[0],ne[1]),X(ne[0]),h(ne[1]),ue(!1)}),[ie]),Ie=(0,r.useCallback)((()=>{T(""),ue(!1)}),[]);(0,r.useCallback)((e=>{const a=JSON.parse(e.currentTarget.value);X(a.melody),h(a.bass)}),[]);return(0,r.useEffect)((()=>{e&&!t&&((0,s.X)("mml").setup({startCallback:pe,stopCallback:be,endedCallback:Ee,errorCallback:ve}),window.clonedXSound("mml").setup({startCallback:Xe,stopCallback:he,endedCallback:Ee,errorCallback:ge}),l(!0))}),[e,t,i,b,$,K,ie,pe,Xe,be,he,Ee,ve,ge]),r.createElement("div",{id:"mml-fieldset","aria-hidden":!de,className:"MML"+(de?" -active":"")},r.createElement("div",{className:"MML__editor"},r.createElement("dl",null,r.createElement("dt",null,"Melody",W?r.createElement("span",{className:"MML__error",role:"alert"},W):null),r.createElement("dd",{contentEditable:de&&n,dangerouslySetInnerHTML:{__html:i},"aria-disabled":!de||!n,className:c?"-highlight":"",onBlur:fe})),r.createElement("dl",null,r.createElement("dt",null,"Bass",Z?r.createElement("span",{className:"MML__error",role:"alert"},Z):null),r.createElement("dd",{contentEditable:de&&n,dangerouslySetInnerHTML:{__html:b},"aria-disabled":!de||!n,className:c?"-highlight":"",onBlur:Ce}))),r.createElement("div",{className:"MML__controllers"},r.createElement("button",{type:"button",disabled:!i&&!b,"aria-label":n?"Start":"Pause",tabIndex:de?0:-1,className:"MML__controller"+(n?" -paused":""),onClick:ke}),r.createElement("button",{type:"button","aria-label":"Rewind",tabIndex:de?0:-1,className:"MML__rewinder",onClick:ye}),r.createElement("a",{href:A,download:A?p("mml-","json"):null,role:"button",tabIndex:de?0:-1,className:"MML__download",onClick:Ae},"Download"),r.createElement(C,{space:8,direction:"left"}),r.createElement(k,{label:"Highlight",checked:c,labelAsText:!0,tabIndex:de?0:-1,onChange:Re}),r.createElement(C,{space:8,direction:"right"}),r.createElement(I,{accept:"application/json",disabled:!n,placeholder:"MML JSON file",filename:x,drag:N,drop:w,tabIndex:de?0:-1,onChange:xe,onDragEnter:Te,onDragOver:Ne,onDragLeave:_e,onDrop:we}),null),r.createElement(g,{isShow:ae,title:"Error",hasOverlay:!0,asAlert:!0,onClose:Se},H),r.createElement(g,{isShow:re,title:"Progress ...",hasOverlay:!0,asAlert:!1},O?r.createElement(F,{label:`${Q} bytes (${M} %)`,rate:M}):null),r.createElement(oe,{hasOverlay:!0,isShow:me,title:"Confirmation",first:{label:"Cancel",action:Ie},second:{label:"OK",action:Oe},onClose:Ie},r.createElement("p",null,"Overwrite. OK ?")))},ue=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("noisesuppressor").activate(),(0,s.X)("oneshot").module("noisesuppressor").activate(),(0,s.X)("audio").module("noisesuppressor").activate(),(0,s.X)("stream").module("noisesuppressor").activate(),(0,s.X)("noise").module("noisesuppressor").activate()):((0,s.X)("mixer").module("noisesuppressor").deactivate(),(0,s.X)("oneshot").module("noisesuppressor").deactivate(),(0,s.X)("audio").module("noisesuppressor").deactivate(),(0,s.X)("stream").module("noisesuppressor").deactivate(),(0,s.X)("noise").module("noisesuppressor").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("noisesuppressor").param({threshold:a}),(0,s.X)("oneshot").module("noisesuppressor").param({threshold:a}),(0,s.X)("audio").module("noisesuppressor").param({threshold:a}),(0,s.X)("stream").module("noisesuppressor").param({threshold:a}),(0,s.X)("noise").module("noisesuppressor").param({threshold:a})}),[]);return r.createElement("div",{className:"NoiseSuppressorFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Noise Sup.",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Threshold",autoupdate:!1,defaultValue:0,min:0,max:1,step:.005,onChange:l}),r.createElement(C,{space:8})))},ce=e=>{const{radioName:a,type:t,onChange:l,onChangeRadio:o}=e;return r.createElement("form",{name:a,className:"OscillatorSelector",onChange:l},r.createElement("label",{className:"OscillatorSelector__sine"+("sine"===t?" -active":"")},r.createElement("input",{type:"radio",name:`radio-${a}`,"aria-label":"sine",checked:"sine"===t,value:"sine",onChange:o})),r.createElement("label",{className:"OscillatorSelector__square"+("square"===t?" -active":"")},r.createElement("input",{type:"radio",name:`radio-${a}`,"aria-label":"square",checked:"square"===t,value:"square",onChange:o})),r.createElement("label",{className:"OscillatorSelector__sawtooth"+("sawtooth"===t?" -active":"")},r.createElement("input",{type:"radio",name:`radio-${a}`,"aria-label":"sawtooth",checked:"sawtooth"===t,value:"sawtooth",onChange:o})),r.createElement("label",{className:"OscillatorSelector__triangle"+("triangle"===t?" -active":"")},r.createElement("input",{type:"radio",name:`radio-${a}`,"aria-label":"triangle",checked:"triangle"===t,value:"triangle",onChange:o})))},de=({oscillatorNumber:e,label:a,radioName:t})=>{const[l,n]=(0,r.useState)("sawtooth"),m=(0,o.I0)(),u=(0,o.v9)((e=>e.oscillatorStates)),c=(0,r.useCallback)((a=>{const t=a.currentTarget.checked;for(let a=0,r=(0,s.X)("oscillator").length();a<r;a++)0===e?(t?(0,s.X)("oscillator").get(a).activate():(0,s.X)("oscillator").get(a).deactivate(),m(V([t,u[1]]))):(t?window.clonedXSound("oscillator").get(a).activate():window.clonedXSound("oscillator").get(a).deactivate(),m(V([u[0],t])))}),[m,u,e]),d=(0,r.useCallback)((e=>{const a=e.currentTarget.elements.namedItem(`radio-${t}`);if(!(a instanceof RadioNodeList))return;const r=a.value;"sine"!==r&&"square"!==r&&"sawtooth"!==r&&"triangle"!==r||n(r)}),[t]),i=(0,r.useCallback)((a=>{const t=a.currentTarget.value;switch(t){case"sine":case"square":case"sawtooth":case"triangle":for(let a=0,r=(0,s.X)("oscillator").length();a<r;a++)0===e?(0,s.X)("oscillator").get(a).param({type:t}):window.clonedXSound("oscillator").get(a).param({type:t})}}),[e]),p=(0,r.useCallback)((a=>{const t=a.currentTarget.valueAsNumber;for(let a=0,r=(0,s.X)("oscillator").length();a<r;a++)0===e?(0,s.X)("oscillator").get(a).param({volume:t}):window.clonedXSound("oscillator").get(a).param({volume:t})}),[e]),X=(0,r.useCallback)((a=>{const t=a.currentTarget.valueAsNumber;for(let a=0,r=(0,s.X)("oscillator").length();a<r;a++)0===e?(0,s.X)("oscillator").get(a).param({octave:t}):window.clonedXSound("oscillator").get(a).param({octave:t})}),[e]),b=(0,r.useCallback)((a=>{const t=a.currentTarget.valueAsNumber;for(let a=0,r=(0,s.X)("oscillator").length();a<r;a++)0===e?(0,s.X)("oscillator").get(a).param({fine:t}):window.clonedXSound("oscillator").get(a).param({fine:t})}),[e]);return r.createElement("div",{className:"OscillatorFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:a,checked:u[e],labelAsText:!1,onChange:c})),r.createElement(C,{space:2}),r.createElement(ce,{radioName:t,type:l,onChange:d,onChangeRadio:i}),r.createElement(C,{space:16}),r.createElement(R,{label:"Volume",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,onChange:p}),r.createElement(C,{space:8}),r.createElement(R,{label:"Octave",autoupdate:!1,defaultValue:0,min:-4,max:4,step:1,onChange:X}),r.createElement(C,{space:8}),r.createElement(R,{label:"Fine",autoupdate:!1,defaultValue:0,min:-1200,max:1200,step:1,onChange:b})))},ie=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("phaser").activate(),(0,s.X)("oneshot").module("phaser").activate(),(0,s.X)("audio").module("phaser").activate(),(0,s.X)("stream").module("phaser").activate(),(0,s.X)("noise").module("phaser").activate()):((0,s.X)("mixer").module("phaser").deactivate(),(0,s.X)("oneshot").module("phaser").deactivate(),(0,s.X)("audio").module("phaser").deactivate(),(0,s.X)("stream").module("phaser").deactivate(),(0,s.X)("noise").module("phaser").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=Number(e.currentTarget.value);switch(a){case 2:case 4:case 8:case 12:case 24:(0,s.X)("mixer").module("phaser").param({stage:a}),(0,s.X)("oneshot").module("phaser").param({stage:a}),(0,s.X)("audio").module("phaser").param({stage:a}),(0,s.X)("stream").module("phaser").param({stage:a}),(0,s.X)("noise").module("phaser").param({stage:a})}}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("phaser").param({frequency:a}),(0,s.X)("oneshot").module("phaser").param({frequency:a}),(0,s.X)("audio").module("phaser").param({frequency:a}),(0,s.X)("stream").module("phaser").param({frequency:a}),(0,s.X)("noise").module("phaser").param({frequency:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("phaser").param({depth:a}),(0,s.X)("oneshot").module("phaser").param({depth:a}),(0,s.X)("audio").module("phaser").param({depth:a}),(0,s.X)("stream").module("phaser").param({depth:a}),(0,s.X)("noise").module("phaser").param({depth:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("phaser").param({rate:a}),(0,s.X)("oneshot").module("phaser").param({rate:a}),(0,s.X)("audio").module("phaser").param({rate:a}),(0,s.X)("stream").module("phaser").param({rate:a}),(0,s.X)("noise").module("phaser").param({rate:a})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("phaser").param({resonance:a}),(0,s.X)("oneshot").module("phaser").param({resonance:a}),(0,s.X)("audio").module("phaser").param({resonance:a}),(0,s.X)("stream").module("phaser").param({resonance:a}),(0,s.X)("noise").module("phaser").param({resonance:a})}),[]),c=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("phaser").param({mix:a}),(0,s.X)("oneshot").module("phaser").param({mix:a}),(0,s.X)("audio").module("phaser").param({mix:a}),(0,s.X)("stream").module("phaser").param({mix:a}),(0,s.X)("noise").module("phaser").param({mix:a})}),[]);return r.createElement("div",{className:"PhaserFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Phaser",checked:e,labelAsText:!1,onChange:t})),r.createElement(P,{label:"Select Phaser Stages",values:["0","2","4","8","12","24"],texts:["all-pass filter","2 stages","4 stages","8 stages","12 stages","24 stages"],disabled:!1,onChange:l,defaultValue:"12"}),r.createElement(C,{space:8}),r.createElement(R,{label:"Frequency",autoupdate:!1,defaultValue:350,min:350,max:8e3,step:1,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:.9,step:.05,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:5,step:.05,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Resonance",autoupdate:!1,defaultValue:1,min:1,max:20,step:1,onChange:u}),r.createElement(C,{space:8}),r.createElement(R,{label:"Mix",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:c}),r.createElement(C,{space:8})))},pe=({loadedApp:e,currentSoundSource:a})=>{const[t,l]=(0,r.useState)(new Array(u).fill(!1)),[n,m]=(0,r.useState)(!1),c=(0,o.v9)((e=>e.downMelodyKeyboardIndexes)),d=(0,o.v9)((e=>e.downBassKeyboardIndexes)),i=(0,o.v9)((e=>e.upMelodyKeyboardIndexes)),p=(0,o.v9)((e=>e.upBassKeyboardIndexes)),X=(0,o.v9)((e=>e.activeMIDIKeyboardIndexes)),b=(0,r.useCallback)((e=>{if(e.currentTarget.classList.contains("skip"))return;if("code"in e.nativeEvent&&"Enter"===e.nativeEvent.code)return;if("keyCode"in e.nativeEvent&&13===e.nativeEvent.keyCode)return;const r=e.currentTarget.getAttribute("data-index");if(null===r)return;const o=Number(r);if("mouseover"!==e.type&&"touchmove"!==e.type||n){switch(a){case"oscillator":(0,s.X)("oscillator").ready(0,0).start(s.X.toFrequencies([o,-1,-1,-1])),window.clonedXSound("oscillator").ready(0,0).start(s.X.toFrequencies([o,-1,-1,-1])),(0,s.X)("mixer").start([(0,s.X)("oscillator"),window.clonedXSound("oscillator")],[1,1]),(0,s.X)("mixer").module("recorder").start();break;case"piano":(0,s.X)("oneshot").ready(0,0).start([o]),(0,s.X)("oneshot").module("recorder").start();break;case"guitar":(0,s.X)("oneshot").ready(0,0).start([o+u]),(0,s.X)("oneshot").module("recorder").start();break;case"electric-guitar":(0,s.X)("oneshot").ready(0,0).start([o+u+u]),(0,s.X)("oneshot").module("recorder").start();break;case"whitenoise":(0,s.X)("noise").param({type:"whitenoise"}).start(),(0,s.X)("noise").module("recorder").start();break;case"pinknoise":(0,s.X)("noise").param({type:"pinknoise"}).start(),(0,s.X)("noise").module("recorder").start();break;case"browniannoise":(0,s.X)("noise").param({type:"browniannoise"}).start(),(0,s.X)("noise").module("recorder").start()}t[o]=!0,l([...t]),m(!0)}}),[a,t,n]),h=(0,r.useCallback)((e=>{if(e.currentTarget.classList.contains("skip"))return;if("code"in e.nativeEvent&&"Enter"===e.nativeEvent.code)return;if("keyCode"in e.nativeEvent&&13===e.nativeEvent.keyCode)return;e.stopPropagation();const r=e.currentTarget.getAttribute("data-index");if(null===r)return;const o=Number(r);switch(a){case"oscillator":(0,s.X)("oscillator").stop(),window.clonedXSound("oscillator").stop();break;case"piano":break;case"guitar":(0,s.X)("oneshot").stop([o+u]);break;case"electric-guitar":(0,s.X)("oneshot").stop([o+u+u]);break;default:(0,s.X)("noise").stop()}t[o]=!1,l([...t]),"mouseup"!==e.type&&"touchend"!==e.type||m(!1)}),[a,t]),E=(0,r.useCallback)((()=>{if("oscillator"===a)(0,s.X)("oscillator").stop(),window.clonedXSound("oscillator").stop();else(0,s.X)("noise").stop();l([...t.map((()=>!1))]),m(!1)}),[a,t]),v=(0,r.useMemo)((()=>({"A-4":0,"A-4h":1,"B-4":2,"C-3":3,"C-3h":4,"D-3":5,"D-3h":6,"E-3":7,"F-3":8,"F-3h":9,"G-3":10,"G-3h":11,"A-3":12,"A-3h":13,"B-3":14,"C-2":15,"C-2h":16,"D-2":17,"D-2h":18,"E-2":19,"F-2":20,"F-2h":21,"G-2":22,"G-2h":23,"A-2":24,"A-2h":25,"B-2":26,"C-1":27,"C-1h":28,"D-1":29,"D-1h":30,"E-1":31,"F-1":32,"F-1h":33,"G-1":34,"G-1h":35,"A-1":36,"A-1h":37,"B-1":38,C:39,Ch:40,D:41,Dh:42,E:43,F:44,Fh:45,G:46,Gh:47,A:48,Ah:49,B:50,C1:51,C1h:52,D1:53,D1h:54,E1:55,F1:56,F1h:57,G1:58,G1h:59,A1:60,A1h:61,B1:62,C2:63,C2h:64,D2:65,D2h:66,E2:67,F2:68,F2h:69,G2:70,G2h:71,A2:72,A2h:73,B2:74,C3:75,C3h:76,D3:77,D3h:78,E3:79,F3:80,F3h:81,G3:82,G3h:83,A3:84,A3h:85,B3:86,C4:87})),[]),g=(0,r.useMemo)((()=>["A-4","B-4","C-3","D-3","E-3","F-3","G-3","A-3","B-3","C-2","D-2","E-2","F-2","G-2","A-2","B-2","C-1","D-1","E-1","F-1","G-1","A-1","B-1","C","D","E","F","G","A","B","C1","D1","E1","F1","G1","A1","B1","C2","D2","E2","F2","G2","A2","B2","C3","D3","E3","F3","G3","A3","B3","C4"]),[]),f=(0,r.useMemo)((()=>["A-4h","skip0","C-3h","D-3h","skip1","F-3h","G-3h","A-3h","skip2","C-2h","D-2h","skip3","F-2h","G-2h","A-2h","skip4","C-1h","D-1h","skip5","F-1h","G-1h","A-1h","skip6","Ch","Dh","skip7","Fh","Gh","Ah","skip8","C1h","D1h","skip9","F1h","G1h","A1h","skip10","C2h","D2h","skip11","F2h","G2h","A2h","skip12","C3h","D3h","skip13","F3h","G3h","A3h"]),[]);return(0,r.useEffect)((()=>{if(e)return window.addEventListener("mouseup",E,!1),window.addEventListener("touchend",E,!1),()=>{window.removeEventListener("mouseup",E,!1),window.removeEventListener("touchend",E,!1)}}),[e,E]),r.createElement("div",{className:"Piano"},r.createElement("ul",{className:"Piano__whites"},g.map((e=>{const a=v[e],l=c.includes(a)&&!i.includes(a),o=d.includes(a)&&!p.includes(a),s=l||o,n=s||X.includes(a);return r.createElement("li",{key:e,className:"Piano__keyboard"+(t[a]||n?" -active":"")},r.createElement("button",{type:"button","aria-pressed":t[a]||s,"data-pitch":e,"data-index":v[e],onMouseDown:b,onTouchStart:b,onKeyDown:b,onMouseUp:h,onTouchEnd:h,onMouseOver:b,onTouchMove:b,onMouseOut:h,onKeyUp:h,onFocus:b,onBlur:h},e))}))),r.createElement("ul",{className:"Piano__blacks"},f.map((e=>{if(e.includes("skip"))return r.createElement("li",{key:e,className:"Piano__keyboard -skip","aria-label":"skip"});const a=v[e],l=c.includes(a)&&!i.includes(a),o=d.includes(a)&&!p.includes(a),s=l||o,n=s||X.includes(a);return r.createElement("li",{key:e,className:"Piano__keyboard"+(t[a]||n?" -active":"")},r.createElement("button",{type:"button","aria-pressed":t[a]||s,"data-pitch":e,"data-index":v[e],onMouseDown:b,onTouchStart:b,onKeyDown:b,onMouseUp:h,onTouchEnd:h,onMouseOver:b,onTouchMove:b,onMouseOut:h,onKeyUp:h,onFocus:b,onBlur:h},e))}))))},Xe=()=>{const[e,a]=(0,r.useState)(!1),[t,l]=(0,r.useState)(!1),o=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("preamp").activate(),(0,s.X)("oneshot").module("preamp").activate(),(0,s.X)("audio").module("preamp").activate(),(0,s.X)("stream").module("preamp").activate(),(0,s.X)("noise").module("preamp").activate(),(0,s.X)("mixer").module("preamp").param({cabinet:{state:!0}}),(0,s.X)("oneshot").module("preamp").param({cabinet:{state:!0}}),(0,s.X)("audio").module("preamp").param({cabinet:{state:!0}}),(0,s.X)("stream").module("preamp").param({cabinet:{state:!0}}),(0,s.X)("noise").module("preamp").param({cabinet:{state:!0}})):((0,s.X)("mixer").module("preamp").deactivate(),(0,s.X)("oneshot").module("preamp").deactivate(),(0,s.X)("audio").module("preamp").deactivate(),(0,s.X)("stream").module("preamp").deactivate(),(0,s.X)("noise").module("preamp").deactivate(),(0,s.X)("mixer").module("preamp").param({cabinet:{state:!1}}),(0,s.X)("oneshot").module("preamp").param({cabinet:{state:!1}}),(0,s.X)("audio").module("preamp").param({cabinet:{state:!1}}),(0,s.X)("stream").module("preamp").param({cabinet:{state:!1}}),(0,s.X)("noise").module("preamp").param({cabinet:{state:!1}})),a(t),l(t)}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({level:a}),(0,s.X)("oneshot").module("preamp").param({level:a}),(0,s.X)("audio").module("preamp").param({level:a}),(0,s.X)("stream").module("preamp").param({level:a}),(0,s.X)("noise").module("preamp").param({level:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({pre:{gain:a}}),(0,s.X)("oneshot").module("preamp").param({pre:{gain:a}}),(0,s.X)("audio").module("preamp").param({pre:{gain:a}}),(0,s.X)("stream").module("preamp").param({pre:{gain:a}}),(0,s.X)("noise").module("preamp").param({pre:{gain:a}})}),[]),u=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({pre:{lead:a}}),(0,s.X)("oneshot").module("preamp").param({pre:{lead:a}}),(0,s.X)("audio").module("preamp").param({pre:{lead:a}}),(0,s.X)("stream").module("preamp").param({pre:{lead:a}}),(0,s.X)("noise").module("preamp").param({pre:{lead:a}})}),[]),c=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({post:{bass:a}}),(0,s.X)("oneshot").module("preamp").param({post:{bass:a}}),(0,s.X)("audio").module("preamp").param({post:{bass:a}}),(0,s.X)("stream").module("preamp").param({post:{bass:a}}),(0,s.X)("noise").module("preamp").param({post:{bass:a}})}),[]),d=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({post:{middle:a}}),(0,s.X)("oneshot").module("preamp").param({post:{middle:a}}),(0,s.X)("audio").module("preamp").param({post:{middle:a}}),(0,s.X)("stream").module("preamp").param({post:{middle:a}}),(0,s.X)("noise").module("preamp").param({post:{middle:a}})}),[]),i=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({post:{treble:a}}),(0,s.X)("oneshot").module("preamp").param({post:{treble:a}}),(0,s.X)("audio").module("preamp").param({post:{treble:a}}),(0,s.X)("stream").module("preamp").param({post:{treble:a}}),(0,s.X)("noise").module("preamp").param({post:{treble:a}})}),[]),p=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("preamp").param({post:{frequency:a}}),(0,s.X)("oneshot").module("preamp").param({post:{frequency:a}}),(0,s.X)("audio").module("preamp").param({post:{frequency:a}}),(0,s.X)("stream").module("preamp").param({post:{frequency:a}}),(0,s.X)("noise").module("preamp").param({post:{frequency:a}})}),[]),X=(0,r.useCallback)((e=>{const a=e.currentTarget.checked;(0,s.X)("mixer").module("preamp").param({cabinet:{state:a}}),(0,s.X)("oneshot").module("preamp").param({post:{state:a}}),(0,s.X)("audio").module("preamp").param({post:{state:a}}),(0,s.X)("stream").module("preamp").param({post:{state:a}}),(0,s.X)("noise").module("preamp").param({post:{state:a}}),l(a)}),[]);return r.createElement("div",{className:"PreampFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Preamp",checked:e,labelAsText:!1,onChange:o})),r.createElement(R,{label:"Level",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Gain",autoupdate:!1,defaultValue:.5,min:0,max:1,step:.05,onChange:m}),r.createElement(C,{space:8}),r.createElement(R,{label:"Lead Gain",autoupdate:!1,defaultValue:.5,min:0,max:1,step:.05,onChange:u}),r.createElement(C,{space:8}),r.createElement(R,{label:"Bass",autoupdate:!1,defaultValue:0,min:-18,max:18,step:1,onChange:c}),r.createElement(C,{space:8}),r.createElement(R,{label:"Middle",autoupdate:!1,defaultValue:0,min:-18,max:18,step:1,onChange:d}),r.createElement(C,{space:8}),r.createElement(R,{label:"Treble",autoupdate:!1,defaultValue:0,min:-18,max:18,step:1,onChange:i}),r.createElement(C,{space:8}),r.createElement(R,{label:"Middle Frequency",autoupdate:!1,defaultValue:500,min:20,max:8e3,step:1,onChange:p}),r.createElement(C,{space:8}),r.createElement(k,{label:"cabinet",checked:t,labelAsText:!0,onChange:X})))},be=e=>{const{loadedApp:a}=e,[t,l]=(0,r.useState)(-1),[o,n]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[i,b]=(0,r.useState)(!1),[h,E]=(0,r.useState)(!1),v=(0,r.useMemo)((()=>X()),[]),g=(0,r.useMemo)((()=>v.recorder?.channel||2),[v]),f=(0,r.useMemo)((()=>v.recorder?.bit||16),[v]),k=(0,r.useMemo)((()=>v.recorder?.type||"objectURL"),[v]),y=(0,r.useCallback)((()=>{-1!==(0,s.X)("mixer").module("recorder").get()||-1!==(0,s.X)("oneshot").module("recorder").get()||-1!==(0,s.X)("audio").module("recorder").get()||-1!==(0,s.X)("noise").module("recorder").get()?((0,s.X)("mixer").module("recorder").stop(),(0,s.X)("oneshot").module("recorder").stop(),(0,s.X)("audio").module("recorder").stop(),(0,s.X)("noise").module("recorder").stop(),u(!1)):((0,s.X)("mixer").module("recorder").ready(t),(0,s.X)("oneshot").module("recorder").ready(t),(0,s.X)("audio").module("recorder").ready(t),(0,s.X)("noise").module("recorder").ready(t),u(!0)),-1!==(0,s.X)("stream").module("recorder").get()?((0,s.X)("stream").module("recorder").stop(),u(!1)):((0,s.X)("stream").module("recorder").ready(t),(0,s.X)("stream").start(),(0,s.X)("stream").module("recorder").start(),u(!0)),E((0,s.X)("mixer").module("recorder").has(-1,-1)||(0,s.X)("oneshot").module("recorder").has(-1,-1)||(0,s.X)("audio").module("recorder").has(-1,-1)||(0,s.X)("stream").module("recorder").has(-1,-1)||(0,s.X)("noise").module("recorder").has(-1,-1))}),[t]),A=(0,r.useCallback)((()=>{if(u(!1),(0,s.X)("mixer").module("recorder").has(-1,-1)){d(!0);const e=(0,s.X)("mixer").module("recorder").create(-1,g,f,k);if("string"==typeof e){const a=new Audio(e);return a.controls=!1,a.play(),n(e),void d(!1)}d(!1)}if((0,s.X)("oneshot").module("recorder").has(-1,-1)){d(!0);const e=(0,s.X)("oneshot").module("recorder").create(-1,g,f,k);if("string"==typeof e){const a=new Audio(e);return a.controls=!1,a.play(),n(e),void d(!1)}d(!1)}if((0,s.X)("audio").module("recorder").has(-1,-1)){d(!0);const e=(0,s.X)("audio").module("recorder").create(-1,g,f,k);if("string"==typeof e){const a=new Audio(e);return a.controls=!1,a.play(),n(e),void d(!1)}d(!1)}if((0,s.X)("stream").module("recorder").has(-1,-1)){d(!0);const e=(0,s.X)("stream").module("recorder").create(-1,g,f,k);if("string"==typeof e){const a=new Audio(e);return a.controls=!1,a.play(),n(e),void d(!1)}d(!1)}if((0,s.X)("noise").module("recorder").has(-1,-1)){d(!0);const e=(0,s.X)("noise").module("recorder").create(-1,g,f,k);if("string"==typeof e){const a=new Audio(e);return a.controls=!1,a.play(),n(e),void d(!1)}d(!1)}}),[g,f,k]),x=(0,r.useCallback)((e=>{o&&!m||e.preventDefault()}),[o,m]),T=(0,r.useCallback)((()=>{m||b(!0)}),[m]),N=(0,r.useCallback)((()=>{(0,s.X)("mixer").module("recorder").clear(t),(0,s.X)("oneshot").module("recorder").clear(t),(0,s.X)("audio").module("recorder").clear(t),(0,s.X)("stream").module("recorder").clear(t),(0,s.X)("noise").module("recorder").clear(t),E((0,s.X)("mixer").module("recorder").has(-1,-1)||(0,s.X)("oneshot").module("recorder").has(-1,-1)||(0,s.X)("audio").module("recorder").has(-1,-1)||(0,s.X)("stream").module("recorder").has(-1,-1)||(0,s.X)("noise").module("recorder").has(-1,-1)),b(!1)}),[t]),_=(0,r.useCallback)((()=>{b(!1)}),[]),w=(0,r.useCallback)((e=>{if(m)return;const a=Number(e.currentTarget.value);(0,s.X)("stream").stop(),(0,s.X)("stream").module("recorder").stop(),l(a)}),[m]),S=(0,r.useCallback)((e=>{(0,s.X)("mixer").module("recorder").param({0:e.currentTarget.valueAsNumber}),(0,s.X)("oneshot").module("recorder").param({0:e.currentTarget.valueAsNumber}),(0,s.X)("audio").module("recorder").param({0:e.currentTarget.valueAsNumber}),(0,s.X)("stream").module("recorder").param({0:e.currentTarget.valueAsNumber}),(0,s.X)("noise").module("recorder").param({0:e.currentTarget.valueAsNumber})}),[]),O=(0,r.useCallback)((e=>{(0,s.X)("mixer").module("recorder").param({1:e.currentTarget.valueAsNumber}),(0,s.X)("oneshot").module("recorder").param({1:e.currentTarget.valueAsNumber}),(0,s.X)("audio").module("recorder").param({1:e.currentTarget.valueAsNumber}),(0,s.X)("stream").module("recorder").param({1:e.currentTarget.valueAsNumber}),(0,s.X)("noise").module("recorder").param({1:e.currentTarget.valueAsNumber})}),[]);return(0,r.useEffect)((()=>{!a||t>-1||l(0)}),[a,t]),r.createElement("div",{className:"RecorderFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,"Recorder"),r.createElement("div",{className:"RecorderFieldset__buttons"},r.createElement("button",{type:"button","aria-label":m?"Stop Recording":"Start Recording",className:"RecorderFieldset__controller"+(m?" -active":""),onClick:y}),r.createElement("button",{type:"button",disabled:m||!h,"aria-label":c?"Now creating WAVE file":"Create WAVE file",className:"RecorderFieldset__creator"+(c?" -active":""),onClick:A}),r.createElement("a",{href:o,download:o?p("record-","wav"):null,"aria-label":"Download","aria-disabled":m||Boolean(""===o),tabIndex:""===o?-1:0,className:"RecorderFieldset__download",onClick:x},"Download"),r.createElement("button",{type:"button",disabled:m,"aria-label":"Clear Track",className:"RecorderFieldset__clear",onClick:T})),r.createElement(C,{space:24}),r.createElement(P,{label:"Select Track",values:["0","1","2","3"],texts:["track 1","track 2","track 3","track 4"],disabled:m,onChange:w}),r.createElement(C,{space:24}),r.createElement(R,{label:"Left Channel",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,onChange:S}),r.createElement(C,{space:8}),r.createElement(R,{label:"Right Channel",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,onChange:O})),r.createElement(oe,{hasOverlay:!0,isShow:i,title:"Confirmation",first:{label:"Cancel",action:_},second:{label:"OK",action:N},onClose:_},r.createElement("p",null,"Clear Track ",t+1,". OK ?")))},he=e=>{const{label:a,values:t,texts:l,groups:o,width:s,defaultValue:n,onChange:m}=e,u=(0,r.useId)();return r.createElement("div",{className:"GroupSelect",style:s?{width:s}:void 0},r.createElement("label",{htmlFor:u},a),r.createElement("select",{id:u,defaultValue:n,onChange:m},o.map(((e,a)=>r.createElement("optgroup",{key:a,label:e},t[e].map(((a,t)=>r.createElement("option",{key:a,value:a},l[e][t]))))))))},Ee=e=>{const{rirDescriptors:a}=e,[t,l]=(0,r.useState)(!1),o=[],n={},m={};a.forEach((e=>{const{value:a,label:t,group:r}=e;o.includes(r)||o.push(r),Array.isArray(n[r])?n[r].push(a.toString(10)):n[r]=[a.toString(10)],Array.isArray(m[r])?m[r].push(t):m[r]=[t]}));const u=(0,r.useCallback)((e=>{const a=e.currentTarget.checked;a?((0,s.X)("mixer").module("reverb").activate(),(0,s.X)("oneshot").module("reverb").activate(),(0,s.X)("audio").module("reverb").activate(),(0,s.X)("stream").module("reverb").activate(),(0,s.X)("noise").module("reverb").activate()):((0,s.X)("mixer").module("reverb").deactivate(),(0,s.X)("oneshot").module("reverb").deactivate(),(0,s.X)("audio").module("reverb").deactivate(),(0,s.X)("stream").module("reverb").deactivate(),(0,s.X)("noise").module("reverb").deactivate()),l(a)}),[]),c=(0,r.useCallback)((e=>{const a=Number(e.currentTarget.value);(0,s.X)("mixer").module("reverb").param({buffer:a}),(0,s.X)("oneshot").module("reverb").param({buffer:a}),(0,s.X)("audio").module("reverb").param({buffer:a}),(0,s.X)("stream").module("reverb").param({buffer:a}),(0,s.X)("noise").module("reverb").param({buffer:a})}),[]),d=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("reverb").param({dry:a}),(0,s.X)("oneshot").module("reverb").param({dry:a}),(0,s.X)("audio").module("reverb").param({dry:a}),(0,s.X)("stream").module("reverb").param({dry:a}),(0,s.X)("noise").module("reverb").param({dry:a})}),[]),i=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("reverb").param({wet:a}),(0,s.X)("oneshot").module("reverb").param({wet:a}),(0,s.X)("audio").module("reverb").param({wet:a}),(0,s.X)("stream").module("reverb").param({wet:a}),(0,s.X)("noise").module("reverb").param({wet:a})}),[]),p=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("reverb").param({tone:a}),(0,s.X)("oneshot").module("reverb").param({tone:a}),(0,s.X)("audio").module("reverb").param({tone:a}),(0,s.X)("stream").module("reverb").param({tone:a}),(0,s.X)("noise").module("reverb").param({tone:a})}),[]);return r.createElement("div",{className:"ReverbFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Reverb",checked:t,labelAsText:!1,onChange:u})),r.createElement(he,{label:"Select Reverb",groups:o,values:n,texts:m,onChange:c}),r.createElement(C,{space:8}),r.createElement(R,{label:"Dry",autoupdate:!1,defaultValue:1,min:0,max:1,step:.05,onChange:d}),r.createElement(C,{space:8}),r.createElement(R,{label:"Wet",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:i}),r.createElement(C,{space:8}),r.createElement(R,{label:"Tone",autoupdate:!1,defaultValue:4e3,min:20,max:8e3,step:1,onChange:p}),r.createElement(C,{space:8}),r.createElement("aside",null,r.createElement("a",{href:"http://legacy.spa.aalto.fi/projects/poririrs/",target:"_blank",rel:"noopener noreferrer"},"This website enables to get RIR (Room Impulse Response) files !"))))},ve=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("ringmodulator").activate(),(0,s.X)("oneshot").module("ringmodulator").activate(),(0,s.X)("audio").module("ringmodulator").activate(),(0,s.X)("stream").module("ringmodulator").activate(),(0,s.X)("noise").module("ringmodulator").activate()):((0,s.X)("mixer").module("ringmodulator").deactivate(),(0,s.X)("oneshot").module("ringmodulator").deactivate(),(0,s.X)("audio").module("ringmodulator").deactivate(),(0,s.X)("stream").module("ringmodulator").deactivate(),(0,s.X)("noise").module("ringmodulator").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("ringmodulator").param({depth:a}),(0,s.X)("oneshot").module("ringmodulator").param({depth:a}),(0,s.X)("audio").module("ringmodulator").param({depth:a}),(0,s.X)("stream").module("ringmodulator").param({depth:a}),(0,s.X)("noise").module("ringmodulator").param({depth:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("ringmodulator").param({rate:a}),(0,s.X)("oneshot").module("ringmodulator").param({rate:a}),(0,s.X)("audio").module("ringmodulator").param({rate:a}),(0,s.X)("stream").module("ringmodulator").param({rate:a}),(0,s.X)("noise").module("ringmodulator").param({rate:a})}),[]);return r.createElement("div",{className:"RingModulatorFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Ring MOD.",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:4e3,step:100,onChange:o}),r.createElement(C,{space:8})))},ge=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("tremolo").activate(),(0,s.X)("oneshot").module("tremolo").activate(),(0,s.X)("audio").module("tremolo").activate(),(0,s.X)("stream").module("tremolo").activate(),(0,s.X)("noise").module("tremolo").activate()):((0,s.X)("mixer").module("tremolo").deactivate(),(0,s.X)("oneshot").module("tremolo").deactivate(),(0,s.X)("audio").module("tremolo").deactivate(),(0,s.X)("stream").module("tremolo").deactivate(),(0,s.X)("noise").module("tremolo").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("tremolo").param({depth:a}),(0,s.X)("oneshot").module("tremolo").param({depth:a}),(0,s.X)("audio").module("tremolo").param({depth:a}),(0,s.X)("stream").module("tremolo").param({depth:a}),(0,s.X)("noise").module("tremolo").param({depth:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("tremolo").param({rate:a}),(0,s.X)("oneshot").module("tremolo").param({rate:a}),(0,s.X)("audio").module("tremolo").param({rate:a}),(0,s.X)("stream").module("tremolo").param({rate:a}),(0,s.X)("noise").module("tremolo").param({rate:a})}),[]);return r.createElement("div",{className:"TremoloFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Tremolo",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:1,step:.05,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:25,step:.05,onChange:o}),r.createElement(C,{space:8})))},fe=()=>{const[e,a]=(0,r.useState)(!1),t=(0,r.useCallback)((e=>{const t=e.currentTarget.checked;t?((0,s.X)("mixer").module("wah").activate(),(0,s.X)("oneshot").module("wah").activate(),(0,s.X)("audio").module("wah").activate(),(0,s.X)("stream").module("wah").activate(),(0,s.X)("noise").module("wah").activate()):((0,s.X)("mixer").module("wah").deactivate(),(0,s.X)("oneshot").module("wah").deactivate(),(0,s.X)("audio").module("wah").deactivate(),(0,s.X)("stream").module("wah").deactivate(),(0,s.X)("noise").module("wah").deactivate()),a(t)}),[]),l=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("wah").param({cutoff:a}),(0,s.X)("oneshot").module("wah").param({cutoff:a}),(0,s.X)("audio").module("wah").param({cutoff:a}),(0,s.X)("stream").module("wah").param({cutoff:a}),(0,s.X)("noise").module("wah").param({cutoff:a})}),[]),o=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("wah").param({depth:a}),(0,s.X)("oneshot").module("wah").param({depth:a}),(0,s.X)("audio").module("wah").param({depth:a}),(0,s.X)("stream").module("wah").param({depth:a}),(0,s.X)("noise").module("wah").param({depth:a})}),[]),n=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("wah").param({rate:a}),(0,s.X)("oneshot").module("wah").param({rate:a}),(0,s.X)("audio").module("wah").param({rate:a}),(0,s.X)("stream").module("wah").param({rate:a}),(0,s.X)("noise").module("wah").param({rate:a})}),[]),m=(0,r.useCallback)((e=>{const a=e.currentTarget.valueAsNumber;(0,s.X)("mixer").module("wah").param({resonance:a}),(0,s.X)("oneshot").module("wah").param({resonance:a}),(0,s.X)("audio").module("wah").param({resonance:a}),(0,s.X)("stream").module("wah").param({resonance:a}),(0,s.X)("noise").module("wah").param({resonance:a})}),[]);return r.createElement("div",{className:"WahFieldset"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(k,{label:"Wah",checked:e,labelAsText:!1,onChange:t})),r.createElement(R,{label:"Cutoff",autoupdate:!1,defaultValue:350,min:350,max:8e3,step:1,onChange:l}),r.createElement(C,{space:8}),r.createElement(R,{label:"Depth",autoupdate:!1,defaultValue:0,min:0,max:.9,step:.01,onChange:o}),r.createElement(C,{space:8}),r.createElement(R,{label:"Rate",autoupdate:!1,defaultValue:0,min:0,max:10,step:.05,onChange:n}),r.createElement(C,{space:8}),r.createElement(R,{label:"Resonance",autoupdate:!1,defaultValue:1,min:1,max:20,step:1,onChange:m}),r.createElement(C,{space:8})))},Ce=()=>{const[e,a]=(0,r.useState)(!1),[t,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(0),[d,i]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[E,v]=(0,r.useState)(!1),C=(0,o.v9)((e=>e.currentSoundSource)),k=(0,r.useMemo)((()=>X()),[]),y=(0,r.useMemo)((()=>k.equalizer),[k]),A=(0,r.useMemo)((()=>[`${n}/one-shots/piano-2/C.mp3`,`${n}/one-shots/piano-2/D.mp3`,`${n}/one-shots/piano-2/E.mp3`,`${n}/one-shots/piano-2/F.mp3`,`${n}/one-shots/piano-2/G.mp3`,`${n}/one-shots/piano-2/A.mp3`,`${n}/one-shots/piano-2/B.mp3`,`${n}/one-shots/guitar/C.mp3`,`${n}/one-shots/e-guitar/C.mp3`]),[]),R=(0,r.useMemo)((()=>[{url:`${n}/impulse-responses/s1_r1_c.mp3`,value:1,label:"1 - 1",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s1_r2_c.mp3`,value:2,label:"1 - 2",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s1_r3_c.mp3`,value:3,label:"1 - 3",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s1_r4_c.mp3`,value:4,label:"1 - 4",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s2_r1_c.mp3`,value:5,label:"2 - 1",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s2_r2_c.mp3`,value:6,label:"2 - 2",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s2_r3_c.mp3`,value:7,label:"2 - 3",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s2_r4_c.mp3`,value:8,label:"2 - 4",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s3_r1_c.mp3`,value:9,label:"3 - 1",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s3_r2_c.mp3`,value:10,label:"3 - 2",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s3_r3_c.mp3`,value:11,label:"3 - 3",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s3_r4_c.mp3`,value:12,label:"3 - 4",group:"Sideways pointed cardioid measurements in the audience area"},{url:`${n}/impulse-responses/s1_r1_o.mp3`,value:13,label:"1 - 1",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s1_r2_o.mp3`,value:14,label:"1 - 2",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s1_r3_o.mp3`,value:15,label:"1 - 3",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s1_r4_o.mp3`,value:16,label:"1 - 4",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s2_r1_o.mp3`,value:17,label:"2 - 1",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s2_r2_o.mp3`,value:18,label:"2 - 2",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s2_r3_o.mp3`,value:19,label:"2 - 3",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s2_r4_o.mp3`,value:20,label:"2 - 4",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s3_r1_o.mp3`,value:21,label:"3 - 1",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s3_r2_o.mp3`,value:22,label:"3 - 2",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s3_r3_o.mp3`,value:23,label:"3 - 3",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s3_r4_o.mp3`,value:24,label:"3 - 4",group:"Omnidirectional measurements in the audience area"},{url:`${n}/impulse-responses/s1_p1_o.mp3`,value:25,label:"1 - 1",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s1_p2_o.mp3`,value:26,label:"1 - 2",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s1_p3_o.mp3`,value:27,label:"1 - 3",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s2_p1_o.mp3`,value:28,label:"2 - 1",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s2_p2_o.mp3`,value:29,label:"2 - 2",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s2_p3_o.mp3`,value:30,label:"2 - 3",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s3_p1_o.mp3`,value:31,label:"3 - 1",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s3_p2_o.mp3`,value:32,label:"3 - 2",group:"Omnidirectional measurements on the stage"},{url:`${n}/impulse-responses/s3_p3_o.mp3`,value:33,label:"3 - 3",group:"Omnidirectional measurements on the stage"}]),[]),x=(0,r.useCallback)((e=>{switch(Math.trunc((e+9)%12)){case 0:case 1:return 0;case 2:case 3:return 1;case 4:return 2;case 5:case 6:return 3;case 7:case 8:return 4;case 9:case 10:return 5;case 11:return 6;default:return-1}}),[]),T=(0,r.useCallback)((e=>{let a=0;return e>=0&&e<=2?a=.0625:e>=3&&e<=14?a=.125:e>=15&&e<=26?a=.25:e>=27&&e<=38?a=.5:e>=39&&e<=50?a=1:e>=51&&e<=62?a=2:e>=63&&e<=74?a=4:e>=75&&e<=86?a=8:e>=87&&e<=98&&(a=16),[1,4,6,9,11,13,16,18,21,23,25,28,30,33,35,37,40,42,45,47,49,52,54,57,59,61,64,66,69,71,73,76,78,81,83,85].includes(e)&&(a*=s.X.FREQUENCY_RATIO),a}),[]),N=(0,r.useCallback)((e=>{let a=0;switch(e-m){case 0:a=1*s.X.FREQUENCY_RATIO**-39;break;case 1:a=1*s.X.FREQUENCY_RATIO**-38;break;case 2:a=1*s.X.FREQUENCY_RATIO**-37;break;case 3:a=1*s.X.FREQUENCY_RATIO**-36;break;case 4:a=1*s.X.FREQUENCY_RATIO**-35;break;case 5:a=1*s.X.FREQUENCY_RATIO**-34;break;case 6:a=1*s.X.FREQUENCY_RATIO**-33;break;case 7:a=1*s.X.FREQUENCY_RATIO**-32;break;case 8:a=1*s.X.FREQUENCY_RATIO**-31;break;case 9:a=1*s.X.FREQUENCY_RATIO**-30;break;case 10:a=1*s.X.FREQUENCY_RATIO**-29;break;case 11:a=1*s.X.FREQUENCY_RATIO**-28;break;case 12:a=1*s.X.FREQUENCY_RATIO**-27;break;case 13:a=1*s.X.FREQUENCY_RATIO**-26;break;case 14:a=1*s.X.FREQUENCY_RATIO**-25;break;case 15:a=1*s.X.FREQUENCY_RATIO**-24;break;case 16:a=1*s.X.FREQUENCY_RATIO**-23;break;case 17:a=1*s.X.FREQUENCY_RATIO**-22;break;case 18:a=1*s.X.FREQUENCY_RATIO**-21;break;case 19:a=1*s.X.FREQUENCY_RATIO**-20;break;case 20:a=1*s.X.FREQUENCY_RATIO**-19;break;case 21:a=1*s.X.FREQUENCY_RATIO**-18;break;case 22:a=1*s.X.FREQUENCY_RATIO**-17;break;case 23:a=1*s.X.FREQUENCY_RATIO**-16;break;case 24:a=1*s.X.FREQUENCY_RATIO**-15;break;case 25:a=1*s.X.FREQUENCY_RATIO**-14;break;case 26:a=1*s.X.FREQUENCY_RATIO**-13;break;case 27:a=1*s.X.FREQUENCY_RATIO**-12;break;case 28:a=1*s.X.FREQUENCY_RATIO**-11;break;case 29:a=1*s.X.FREQUENCY_RATIO**-10;break;case 30:a=1*s.X.FREQUENCY_RATIO**-9;break;case 31:a=1*s.X.FREQUENCY_RATIO**-8;break;case 32:a=1*s.X.FREQUENCY_RATIO**-7;break;case 33:a=1*s.X.FREQUENCY_RATIO**-6;break;case 34:a=1*s.X.FREQUENCY_RATIO**-5;break;case 35:a=1*s.X.FREQUENCY_RATIO**-4;break;case 36:a=1*s.X.FREQUENCY_RATIO**-3;break;case 37:a=1*s.X.FREQUENCY_RATIO**-2;break;case 38:a=1*s.X.FREQUENCY_RATIO**-1;break;case 39:a=1;break;case 40:a=1*s.X.FREQUENCY_RATIO**1;break;case 41:a=1*s.X.FREQUENCY_RATIO**2;break;case 42:a=1*s.X.FREQUENCY_RATIO**3;break;case 43:a=1*s.X.FREQUENCY_RATIO**4;break;case 44:a=1*s.X.FREQUENCY_RATIO**5;break;case 45:a=1*s.X.FREQUENCY_RATIO**6;break;case 46:a=1*s.X.FREQUENCY_RATIO**7;break;case 47:a=1*s.X.FREQUENCY_RATIO**8;break;case 48:a=1*s.X.FREQUENCY_RATIO**9;break;case 49:a=1*s.X.FREQUENCY_RATIO**10;break;case 50:a=1*s.X.FREQUENCY_RATIO**11;break;case 51:a=1*s.X.FREQUENCY_RATIO**12;break;case 52:a=1*s.X.FREQUENCY_RATIO**13;break;case 53:a=1*s.X.FREQUENCY_RATIO**14;break;case 54:a=1*s.X.FREQUENCY_RATIO**15;break;case 55:a=1*s.X.FREQUENCY_RATIO**16;break;case 56:a=1*s.X.FREQUENCY_RATIO**17;break;case 57:a=1*s.X.FREQUENCY_RATIO**18;break;case 58:a=1*s.X.FREQUENCY_RATIO**19;break;case 59:a=1*s.X.FREQUENCY_RATIO**20;break;case 60:a=1*s.X.FREQUENCY_RATIO**21;break;case 61:a=1*s.X.FREQUENCY_RATIO**22;break;case 62:a=1*s.X.FREQUENCY_RATIO**23;break;case 63:a=1*s.X.FREQUENCY_RATIO**24;break;case 64:a=1*s.X.FREQUENCY_RATIO**25;break;case 65:a=1*s.X.FREQUENCY_RATIO**26;break;case 66:a=1*s.X.FREQUENCY_RATIO**27;break;case 67:a=1*s.X.FREQUENCY_RATIO**28;break;case 68:a=1*s.X.FREQUENCY_RATIO**29;break;case 69:a=1*s.X.FREQUENCY_RATIO**30;break;case 70:a=1*s.X.FREQUENCY_RATIO**31;break;case 71:a=1*s.X.FREQUENCY_RATIO**33;break;case 77:a=1*s.X.FREQUENCY_RATIO**34;break;case 78:a=1*s.X.FREQUENCY_RATIO**35;break;case 79:a=1*s.X.FREQUENCY_RATIO**36;break;case 80:a=1*s.X.FREQUENCY_RATIO**37;break;case 81:a=1*s.X.FREQUENCY_RATIO**38;break;case 82:a=1*s.X.FREQUENCY_RATIO**39;break;case 83:a=1*s.X.FREQUENCY_RATIO**40;break;case 84:a=1*s.X.FREQUENCY_RATIO**41;break;case 85:a=1*s.X.FREQUENCY_RATIO**42;break;case 86:a=1*s.X.FREQUENCY_RATIO**43;break;case 87:a=1*s.X.FREQUENCY_RATIO**44;break;case 88:a=1*s.X.FREQUENCY_RATIO**45}return a}),[]),_=(0,r.useCallback)((e=>{let a=0;switch(e-m-m){case 0:a=1*s.X.FREQUENCY_RATIO**-39;break;case 1:a=1*s.X.FREQUENCY_RATIO**-38;break;case 2:a=1*s.X.FREQUENCY_RATIO**-37;break;case 3:a=1*s.X.FREQUENCY_RATIO**-36;break;case 4:a=1*s.X.FREQUENCY_RATIO**-35;break;case 5:a=1*s.X.FREQUENCY_RATIO**-34;break;case 6:a=1*s.X.FREQUENCY_RATIO**-33;break;case 7:a=1*s.X.FREQUENCY_RATIO**-32;break;case 8:a=1*s.X.FREQUENCY_RATIO**-31;break;case 9:a=1*s.X.FREQUENCY_RATIO**-30;break;case 10:a=1*s.X.FREQUENCY_RATIO**-29;break;case 11:a=1*s.X.FREQUENCY_RATIO**-28;break;case 12:a=1*s.X.FREQUENCY_RATIO**-27;break;case 13:a=1*s.X.FREQUENCY_RATIO**-26;break;case 14:a=1*s.X.FREQUENCY_RATIO**-25;break;case 15:a=1*s.X.FREQUENCY_RATIO**-24;break;case 16:a=1*s.X.FREQUENCY_RATIO**-23;break;case 17:a=1*s.X.FREQUENCY_RATIO**-22;break;case 18:a=1*s.X.FREQUENCY_RATIO**-21;break;case 19:a=1*s.X.FREQUENCY_RATIO**-20;break;case 20:a=1*s.X.FREQUENCY_RATIO**-19;break;case 21:a=1*s.X.FREQUENCY_RATIO**-18;break;case 22:a=1*s.X.FREQUENCY_RATIO**-17;break;case 23:a=1*s.X.FREQUENCY_RATIO**-16;break;case 24:a=1*s.X.FREQUENCY_RATIO**-15;break;case 25:a=1*s.X.FREQUENCY_RATIO**-14;break;case 26:a=1*s.X.FREQUENCY_RATIO**-13;break;case 27:a=1*s.X.FREQUENCY_RATIO**-12;break;case 28:a=1*s.X.FREQUENCY_RATIO**-11;break;case 29:a=1*s.X.FREQUENCY_RATIO**-10;break;case 30:a=1*s.X.FREQUENCY_RATIO**-9;break;case 31:a=1*s.X.FREQUENCY_RATIO**-8;break;case 32:a=1*s.X.FREQUENCY_RATIO**-7;break;case 33:a=1*s.X.FREQUENCY_RATIO**-6;break;case 34:a=1*s.X.FREQUENCY_RATIO**-5;break;case 35:a=1*s.X.FREQUENCY_RATIO**-4;break;case 36:a=1*s.X.FREQUENCY_RATIO**-3;break;case 37:a=1*s.X.FREQUENCY_RATIO**-2;break;case 38:a=1*s.X.FREQUENCY_RATIO**-1;break;case 39:a=1;break;case 40:a=1*s.X.FREQUENCY_RATIO**1;break;case 41:a=1*s.X.FREQUENCY_RATIO**2;break;case 42:a=1*s.X.FREQUENCY_RATIO**3;break;case 43:a=1*s.X.FREQUENCY_RATIO**4;break;case 44:a=1*s.X.FREQUENCY_RATIO**5;break;case 45:a=1*s.X.FREQUENCY_RATIO**6;break;case 46:a=1*s.X.FREQUENCY_RATIO**7;break;case 47:a=1*s.X.FREQUENCY_RATIO**8;break;case 48:a=1*s.X.FREQUENCY_RATIO**9;break;case 49:a=1*s.X.FREQUENCY_RATIO**10;break;case 50:a=1*s.X.FREQUENCY_RATIO**11;break;case 51:a=1*s.X.FREQUENCY_RATIO**12;break;case 52:a=1*s.X.FREQUENCY_RATIO**13;break;case 53:a=1*s.X.FREQUENCY_RATIO**14;break;case 54:a=1*s.X.FREQUENCY_RATIO**15;break;case 55:a=1*s.X.FREQUENCY_RATIO**16;break;case 56:a=1*s.X.FREQUENCY_RATIO**17;break;case 57:a=1*s.X.FREQUENCY_RATIO**18;break;case 58:a=1*s.X.FREQUENCY_RATIO**19;break;case 59:a=1*s.X.FREQUENCY_RATIO**20;break;case 60:a=1*s.X.FREQUENCY_RATIO**21;break;case 61:a=1*s.X.FREQUENCY_RATIO**22;break;case 62:a=1*s.X.FREQUENCY_RATIO**23;break;case 63:a=1*s.X.FREQUENCY_RATIO**24;break;case 64:a=1*s.X.FREQUENCY_RATIO**25;break;case 65:a=1*s.X.FREQUENCY_RATIO**26;break;case 66:a=1*s.X.FREQUENCY_RATIO**27;break;case 67:a=1*s.X.FREQUENCY_RATIO**28;break;case 68:a=1*s.X.FREQUENCY_RATIO**29;break;case 69:a=1*s.X.FREQUENCY_RATIO**30;break;case 70:a=1*s.X.FREQUENCY_RATIO**31;break;case 71:a=1*s.X.FREQUENCY_RATIO**33;break;case 77:a=1*s.X.FREQUENCY_RATIO**34;break;case 78:a=1*s.X.FREQUENCY_RATIO**35;break;case 79:a=1*s.X.FREQUENCY_RATIO**36;break;case 80:a=1*s.X.FREQUENCY_RATIO**37;break;case 81:a=1*s.X.FREQUENCY_RATIO**38;break;case 82:a=1*s.X.FREQUENCY_RATIO**39;break;case 83:a=1*s.X.FREQUENCY_RATIO**40;break;case 84:a=1*s.X.FREQUENCY_RATIO**41;break;case 85:a=1*s.X.FREQUENCY_RATIO**42;break;case 86:a=1*s.X.FREQUENCY_RATIO**43;break;case 87:a=1*s.X.FREQUENCY_RATIO**44;break;case 88:a=1*s.X.FREQUENCY_RATIO**45}return a}),[]),w=(0,r.useCallback)((()=>{const e=[];for(let a=0;a<m;a++){const t={bufferIndex:0,playbackRate:1,loop:!1,loopStart:0,loopEnd:0,volume:1};t.bufferIndex=x(a),t.playbackRate=T(a),e[a]=t}for(let a=m;a<176;a++){const t={bufferIndex:7,playbackRate:1,loop:!1,loopStart:0,loopEnd:0,volume:1};t.playbackRate=N(a),e[a]=t}for(let a=176;a<264;a++){const t={bufferIndex:8,playbackRate:1,loop:!1,loopStart:0,loopEnd:0,volume:1};t.playbackRate=_(a),e[a]=t}return e}),[x,T,N,_]),O=(0,r.useCallback)((()=>{i(""),h(!1)}),[]),I=(0,r.useCallback)((()=>{i(""),v(!1)}),[]),F=(0,r.useCallback)((()=>{const e=s.X.clone();s.X.free([(0,s.X)("media")]),e.free([e("oneshot"),e("audio"),e("media"),e("stream"),e("mixer"),e("midi")]),(0,s.X)("oneshot").edit([(0,s.X)("oneshot").module("compressor"),(0,s.X)("oneshot").module("wah"),(0,s.X)("oneshot").module("overdrive"),(0,s.X)("oneshot").module("fuzz"),(0,s.X)("oneshot").module("preamp"),(0,s.X)("oneshot").module("filter"),(0,s.X)("oneshot").module("tremolo"),(0,s.X)("oneshot").module("ringmodulator"),(0,s.X)("oneshot").module("phaser"),(0,s.X)("oneshot").module("chorus"),(0,s.X)("oneshot").module("flanger"),(0,s.X)("oneshot").module("delay"),(0,s.X)("oneshot").module("reverb")]),(0,s.X)("mixer").edit([(0,s.X)("mixer").module("compressor"),(0,s.X)("mixer").module("wah"),(0,s.X)("mixer").module("overdrive"),(0,s.X)("mixer").module("fuzz"),(0,s.X)("mixer").module("preamp"),(0,s.X)("mixer").module("filter"),(0,s.X)("mixer").module("noisesuppressor"),(0,s.X)("mixer").module("tremolo"),(0,s.X)("mixer").module("ringmodulator"),(0,s.X)("mixer").module("phaser"),(0,s.X)("mixer").module("chorus"),(0,s.X)("mixer").module("flanger"),(0,s.X)("mixer").module("delay"),(0,s.X)("mixer").module("reverb")]),(0,s.X)("audio").edit([(0,s.X)("audio").module("pitchshifter"),(0,s.X)("audio").module("compressor"),(0,s.X)("audio").module("wah"),(0,s.X)("audio").module("overdrive"),(0,s.X)("audio").module("fuzz"),(0,s.X)("audio").module("preamp"),(0,s.X)("audio").module("filter"),(0,s.X)("audio").module("noisesuppressor"),(0,s.X)("audio").module("tremolo"),(0,s.X)("audio").module("ringmodulator"),(0,s.X)("audio").module("phaser"),(0,s.X)("audio").module("chorus"),(0,s.X)("audio").module("flanger"),(0,s.X)("audio").module("delay"),(0,s.X)("audio").module("reverb"),(0,s.X)("audio").module("vocalcanceler")]),(0,s.X)("stream").edit([(0,s.X)("stream").module("pitchshifter"),(0,s.X)("stream").module("compressor"),(0,s.X)("stream").module("wah"),(0,s.X)("stream").module("overdrive"),(0,s.X)("stream").module("fuzz"),(0,s.X)("stream").module("preamp"),(0,s.X)("stream").module("filter"),(0,s.X)("stream").module("noisesuppressor"),(0,s.X)("stream").module("tremolo"),(0,s.X)("stream").module("ringmodulator"),(0,s.X)("stream").module("phaser"),(0,s.X)("stream").module("chorus"),(0,s.X)("stream").module("flanger"),(0,s.X)("stream").module("delay"),(0,s.X)("stream").module("reverb")]),(0,s.X)("noise").edit([(0,s.X)("noise").module("compressor"),(0,s.X)("noise").module("wah"),(0,s.X)("noise").module("overdrive"),(0,s.X)("noise").module("fuzz"),(0,s.X)("noise").module("preamp"),(0,s.X)("noise").module("filter"),(0,s.X)("noise").module("noisesuppressor"),(0,s.X)("noise").module("tremolo"),(0,s.X)("noise").module("ringmodulator"),(0,s.X)("noise").module("phaser"),(0,s.X)("noise").module("chorus"),(0,s.X)("noise").module("flanger"),(0,s.X)("noise").module("delay"),(0,s.X)("noise").module("reverb")]),(0,s.X)("oscillator").edit([(0,s.X)("oscillator").module("compressor"),(0,s.X)("oscillator").module("wah"),(0,s.X)("oscillator").module("overdrive"),(0,s.X)("oscillator").module("fuzz"),(0,s.X)("oscillator").module("preamp"),(0,s.X)("oscillator").module("filter"),(0,s.X)("oscillator").module("noisesuppressor"),(0,s.X)("oscillator").module("tremolo"),(0,s.X)("oscillator").module("ringmodulator"),(0,s.X)("oscillator").module("phaser"),(0,s.X)("oscillator").module("chorus"),(0,s.X)("oscillator").module("flanger"),(0,s.X)("oscillator").module("delay"),(0,s.X)("oscillator").module("reverb")]),e("oscillator").edit([(0,s.X)("oscillator").module("compressor"),(0,s.X)("oscillator").module("wah"),(0,s.X)("oscillator").module("overdrive"),(0,s.X)("oscillator").module("fuzz"),(0,s.X)("oscillator").module("preamp"),(0,s.X)("oscillator").module("filter"),(0,s.X)("oscillator").module("noisesuppressor"),(0,s.X)("oscillator").module("tremolo"),(0,s.X)("oscillator").module("ringmodulator"),(0,s.X)("oscillator").module("phaser"),(0,s.X)("oscillator").module("chorus"),(0,s.X)("oscillator").module("flanger"),(0,s.X)("oscillator").module("delay"),(0,s.X)("oscillator").module("reverb")]),(0,s.X)("oscillator").setup([!0,!1,!1,!1]),e("oscillator").setup([!1,!1,!1,!1]),(0,s.X)("audio").module("wah").param({auto:!0}),(0,s.X)("audio").module("pitchshifter").activate(),(0,s.X)("stream").module("pitchshifter").activate();const t={samples:2048,pre:{state:!0,gain:.5,lead:.5},post:{state:!0}};(0,s.X)("stream").setup({audio:{echoCancellation:!0},video:!1}),(0,s.X)("mixer").module("preamp").param(t),(0,s.X)("mixer").module("chorus").param({tone:4e3}),(0,s.X)("mixer").module("flanger").param({tone:4e3}),(0,s.X)("mixer").module("delay").param({tone:4e3}),(0,s.X)("mixer").module("reverb").param({tone:4e3}),(0,s.X)("mixer").module("filter").param({frequency:8e3}),(0,s.X)("mixer").module("noisesuppressor").deactivate(),(0,s.X)("oneshot").module("preamp").param(t),(0,s.X)("oneshot").module("chorus").param({tone:4e3}),(0,s.X)("oneshot").module("flanger").param({tone:4e3}),(0,s.X)("oneshot").module("delay").param({tone:4e3}),(0,s.X)("oneshot").module("reverb").param({tone:4e3}),(0,s.X)("oneshot").module("filter").param({frequency:8e3}),(0,s.X)("audio").module("preamp").param(t),(0,s.X)("audio").module("chorus").param({tone:4e3}),(0,s.X)("audio").module("flanger").param({tone:4e3}),(0,s.X)("audio").module("delay").param({tone:4e3}),(0,s.X)("audio").module("reverb").param({tone:4e3}),(0,s.X)("audio").module("filter").param({frequency:8e3}),(0,s.X)("audio").module("noisesuppressor").deactivate(),(0,s.X)("stream").module("preamp").param(t),(0,s.X)("stream").module("chorus").param({tone:4e3}),(0,s.X)("stream").module("flanger").param({tone:4e3}),(0,s.X)("stream").module("delay").param({tone:4e3}),(0,s.X)("stream").module("reverb").param({tone:4e3}),(0,s.X)("stream").module("filter").param({frequency:8e3}),(0,s.X)("stream").module("noisesuppressor").deactivate(),(0,s.X)("noise").module("preamp").param(t),(0,s.X)("noise").module("chorus").param({tone:4e3}),(0,s.X)("noise").module("flanger").param({tone:4e3}),(0,s.X)("noise").module("delay").param({tone:4e3}),(0,s.X)("noise").module("reverb").param({tone:4e3}),(0,s.X)("noise").module("filter").param({frequency:8e3}),(0,s.X)("noise").module("noisesuppressor").deactivate(),(0,s.X)("oscillator").module("preamp").param(t),(0,s.X)("oscillator").module("chorus").param({tone:4e3}),(0,s.X)("oscillator").module("flanger").param({tone:4e3}),(0,s.X)("oscillator").module("delay").param({tone:4e3}),(0,s.X)("oscillator").module("reverb").param({tone:4e3}),(0,s.X)("oscillator").module("filter").param({frequency:8e3}),(0,s.X)("oscillator").module("noisesuppressor").deactivate(),e("oscillator").module("preamp").param(t),e("oscillator").module("chorus").param({tone:4e3}),e("oscillator").module("flanger").param({tone:4e3}),e("oscillator").module("delay").param({tone:4e3}),e("oscillator").module("reverb").param({tone:4e3}),e("oscillator").module("filter").param({frequency:8e3}),e("oscillator").module("noisesuppressor").deactivate();for(let a=0,t=(0,s.X)("oscillator").length();a<t;a++)(0,s.X)("oscillator").get(a).param({type:"sawtooth"}),e("oscillator").get(a).param({type:"sawtooth"});(0,s.X)("stream").clearAudioDevices(),y&&((0,s.X)("mixer").module("equalizer").param(y).activate(),(0,s.X)("oneshot").module("equalizer").param(y).activate(),(0,s.X)("audio").module("equalizer").param(y).activate(),(0,s.X)("stream").module("equalizer").param(y).activate(),(0,s.X)("noise").module("equalizer").param(y).activate()),(0,s.X)("oneshot").setup({resources:A,settings:w(),timeout:6e4,successCallback:()=>{if(0!==R.length){const t=[];R.forEach((r=>{s.X.ajax({url:r.url,type:"arraybuffer",timeout:6e4,successCallback:(r,o)=>{s.X.decode(s.X.get(),o,(r=>{t.push(r);const o=Math.trunc(t.length/R.length*100);t.length===R.length?(c(100),l(!1),a(!0)):((0,s.X)("mixer").module("reverb").preset({rirs:t}),(0,s.X)("oneshot").module("reverb").preset({rirs:t}),(0,s.X)("audio").module("reverb").preset({rirs:t}),(0,s.X)("stream").module("reverb").preset({rirs:t}),(0,s.X)("noise").module("reverb").preset({rirs:t}),(0,s.X)("oscillator").module("reverb").preset({rirs:t}),e("oscillator").module("reverb").preset({rirs:t}),c(o),l(!0))}),(()=>{i("Decode error."),h(!0)}))},errorCallback:()=>{i("The loading of RIRs failed."),h(!0)}})}))}},errorCallback:()=>{i("The loading of audio files failed."),h(!0)}}),(0,s.X)("mixer").module("recorder").setup(2,4),(0,s.X)("oneshot").module("recorder").setup(2,4),(0,s.X)("audio").module("recorder").setup(2,4),(0,s.X)("stream").module("recorder").setup(2,4),(0,s.X)("noise").module("recorder").setup(2,4),window.clonedXSound=e}),[y,A,R,w]);return r.createElement(r.Fragment,null,r.createElement(le,{loadedApp:e,progress:t,rate:u,onClickSetupCallback:F}),r.createElement("main",null,r.createElement(b,null,r.createElement(f,{numberOfDivisions:5},r.createElement(de,{oscillatorNumber:0,label:"Oscillator - 1",radioName:"oscillator-type-0"})),r.createElement(f,{numberOfDivisions:5},r.createElement(de,{oscillatorNumber:1,label:"Oscillator - 2",radioName:"oscillator-type-1"})),r.createElement(f,{numberOfDivisions:5},r.createElement(ee,null)),r.createElement(f,{numberOfDivisions:5},r.createElement(be,{loadedApp:e})),r.createElement(f,{numberOfDivisions:5},r.createElement(U,{loadedApp:e}))),r.createElement(S,{loadedApp:e}),r.createElement(me,{loadedApp:e,currentSoundSource:C}),r.createElement(H,{currentSoundSource:C}),r.createElement(pe,{loadedApp:e,currentSoundSource:C}),r.createElement(b,null,r.createElement(f,{numberOfDivisions:6},r.createElement(J,null),r.createElement(fe,null)),r.createElement(f,{numberOfDivisions:6},r.createElement(j,null),r.createElement(Xe,null)),r.createElement(f,{numberOfDivisions:6},r.createElement(ae,null),r.createElement(ue,null)),r.createElement(f,{numberOfDivisions:6},r.createElement(ge,null),r.createElement(ve,null),r.createElement(ie,null)),r.createElement(f,{numberOfDivisions:6},r.createElement(W,null),r.createElement(te,null)),r.createElement(f,{numberOfDivisions:6},r.createElement(Z,null),r.createElement(Ee,{rirDescriptors:R})))),r.createElement(re,null),r.createElement(g,{isShow:p,title:"Error",hasOverlay:!0,asAlert:!0,onClose:O},d),r.createElement(g,{isShow:E,title:"Error",hasOverlay:!0,asAlert:!0,onClose:I},d))},ke=(0,Q.xC)({reducer:K}),ye=document.getElementById("app");if(ye){(0,l.s)(ye).render(r.createElement(o.zt,{store:ke},r.createElement(Ce,null)))}}},t={};function r(e){var l=t[e];if(void 0!==l)return l.exports;var o=t[e]={exports:{}};return a[e](o,o.exports,r),o.exports}r.m=a,e=[],r.O=(a,t,l,o)=>{if(!t){var s=1/0;for(c=0;c<e.length;c++){for(var[t,l,o]=e[c],n=!0,m=0;m<t.length;m++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](t[m])))?t.splice(m--,1):(n=!1,o<s&&(s=o));if(n){e.splice(c--,1);var u=l();void 0!==u&&(a=u)}}return a}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[t,l,o]},r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={143:0};r.O.j=a=>0===e[a];var a=(a,t)=>{var l,o,[s,n,m]=t,u=0;if(s.some((a=>0!==e[a]))){for(l in n)r.o(n,l)&&(r.m[l]=n[l]);if(m)var c=m(r)}for(a&&a(t);u<s.length;u++)o=s[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(c)},t=this.webpackChunkxsound_app=this.webpackChunkxsound_app||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})(),r.O(void 0,[736],(()=>r(194)));var l=r.O(void 0,[736],(()=>r(208)));l=r.O(l)})();
//# sourceMappingURL=app.js.map